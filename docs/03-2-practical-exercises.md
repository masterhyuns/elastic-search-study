# CRUD ë° Index Settings ì‹¤ì „ ê³¼ì œ

> ì§ì ‘ í•´ë³´ë©´ì„œ Elasticsearchì˜ í•µì‹¬ ê°œë…ì„ ì²´ë“í•˜ëŠ” ì‹¤ìŠµ ê³¼ì œ ëª¨ìŒ

## ğŸ¯ í•™ìŠµ ëª©í‘œ

- Index ìƒì„±ë¶€í„° ê²€ìƒ‰ê¹Œì§€ ì „ì²´ í”Œë¡œìš° ì´í•´
- Settings ê°’ ë³€ê²½ì— ë”°ë¥¸ ë™ì‘ ì°¨ì´ ì²´ê°
- ì‹¤ì œ ì„œë¹„ìŠ¤ ì‹œë‚˜ë¦¬ì˜¤ ì ìš© ëŠ¥ë ¥ í–¥ìƒ

---

## ğŸ“š ë‚œì´ë„ë³„ ê³¼ì œ êµ¬ì„±

```
ğŸŸ¢ ê¸°ë³¸ (Basic)     - CRUD ê¸°ë³¸ ì¡°ì‘ ìµíˆê¸°
ğŸŸ¡ ì¤‘ê¸‰ (Advanced)  - Settings ì´í•´ ë° ìµœì í™”
ğŸ”´ ê³ ê¸‰ (Expert)    - ì‹¤ì „ ì‹œë‚˜ë¦¬ì˜¤ êµ¬í˜„
```

---

## ğŸŸ¢ ê¸°ë³¸ ê³¼ì œ (Basic)

### ê³¼ì œ 1: ì‚¬ìš©ì ì¸ë±ìŠ¤ ë§Œë“¤ê¸°

**ëª©í‘œ**: í˜‘ì—… í”Œë«í¼ì˜ ì‚¬ìš©ì ì •ë³´ë¥¼ ì €ì¥í•  ì¸ë±ìŠ¤ ìƒì„±

**ìš”êµ¬ì‚¬í•­**:
```json
ì¸ë±ìŠ¤ëª…: users

í•„ë“œ:
- user_id: ë¬¸ìì—´ (ì •í™•í•œ ë§¤ì¹­ìš©)
- username: ë¬¸ìì—´ (ì •í™•í•œ ë§¤ì¹­ìš©)
- email: ë¬¸ìì—´ (ì •í™•í•œ ë§¤ì¹­ìš©)
- full_name: í…ìŠ¤íŠ¸ (ì „ë¬¸ ê²€ìƒ‰ìš©)
- department: ë¬¸ìì—´ (í•„í„°ë§ìš©)
- position: ë¬¸ìì—´ (í•„í„°ë§ìš©)
- joined_at: ë‚ ì§œ
- is_active: ë¶ˆë¦°
- bio: í…ìŠ¤íŠ¸ (ì „ë¬¸ ê²€ìƒ‰ìš©, ì„ íƒ)
```

**íŒíŠ¸**:
```json
PUT /users
{
  "mappings": {
    "properties": {
      "user_id": {"type": "keyword"},
      "username": {"type": "???"},
      // ë‚˜ë¨¸ì§€ í•„ë“œ ì‘ì„±
    }
  }
}
```

**ê²€ì¦**:
```bash
# ë§¤í•‘ í™•ì¸
GET /users/_mapping

# ì˜ˆìƒ ê²°ê³¼: 9ê°œ í•„ë“œê°€ ì˜¬ë°”ë¥¸ íƒ€ì…ìœ¼ë¡œ ì •ì˜ë˜ì–´ì•¼ í•¨
```

---

### ê³¼ì œ 2: íŒ€ì› ë°ì´í„° 5ëª… ì¶”ê°€í•˜ê¸°

**ëª©í‘œ**: Bulk APIë¥¼ ì‚¬ìš©í•œ íš¨ìœ¨ì ì¸ ë°ì´í„° ì…ë ¥

**ìš”êµ¬ì‚¬í•­**:
- 5ëª…ì˜ íŒ€ì› ë°ì´í„°ë¥¼ í•œ ë²ˆì— ì¶”ê°€
- ê°ì ë‹¤ë¥¸ ë¶€ì„œ (ê°œë°œíŒ€, ë””ìì¸íŒ€, ê¸°íšíŒ€, QAíŒ€, ê²½ì˜ì§€ì›)
- IDëŠ” ì§ì ‘ ì§€ì • (user_001 ~ user_005)

**íŒíŠ¸**:
```bash
POST /users/_bulk
{"index": {"_id": "user_001"}}
{"user_id": "u001", "username": "hong", "email": "hong@company.com", ...}
{"index": {"_id": "user_002"}}
{"user_id": "u002", ...}
```

**ê²€ì¦**:
```bash
# ì „ì²´ ì‚¬ìš©ì ì¡°íšŒ
GET /users/_search
{
  "query": {"match_all": {}}
}

# ì˜ˆìƒ ê²°ê³¼: total.value = 5
```

---

### ê³¼ì œ 3: ì‚¬ìš©ì ì •ë³´ ìˆ˜ì •í•˜ê¸°

**ëª©í‘œ**: Update API 3ê°€ì§€ ë°©ë²• ì´í•´

**ìš”êµ¬ì‚¬í•­**:

**3-1. ë¶€ë¶„ ìˆ˜ì • (Partial Update)**
```bash
# user_001ì˜ ë¶€ì„œë¥¼ "ê°œë°œíŒ€"ì—ì„œ "ê²½ì˜ì§€ì›"ìœ¼ë¡œ ë³€ê²½
POST /users/_update/user_001
{
  "doc": {
    "department": "ê²½ì˜ì§€ì›"
  }
}
```

**3-2. ìŠ¤í¬ë¦½íŠ¸ ìˆ˜ì •**
```bash
# user_002ë¥¼ ë¹„í™œì„± ìƒíƒœë¡œ ë³€ê²½
POST /users/_update/user_002
{
  "script": {
    "source": "ctx._source.is_active = false"
  }
}
```

**3-3. ì „ì²´ êµì²´ (PUT)**
```bash
# user_003ì˜ ëª¨ë“  ì •ë³´ë¥¼ ìƒˆë¡œ ì‘ì„±
PUT /users/_doc/user_003
{
  "user_id": "u003",
  "username": "kim",
  // ëª¨ë“  í•„ë“œ ë‹¤ì‹œ ì‘ì„±
}
```

**ê²€ì¦**:
```bash
# ë³€ê²½ í™•ì¸
GET /users/_doc/user_001
GET /users/_doc/user_002
GET /users/_doc/user_003

# _version ê°’ì´ ì¦ê°€í–ˆëŠ”ì§€ í™•ì¸
```

---

### ê³¼ì œ 4: ì¡°ê±´ë¶€ ê²€ìƒ‰ ë° ì‚­ì œ

**ëª©í‘œ**: ì¿¼ë¦¬ ê¸°ë°˜ ì‘ì—… ì´í•´

**ìš”êµ¬ì‚¬í•­**:

**4-1. íŠ¹ì • ë¶€ì„œ ê²€ìƒ‰**
```bash
# ê°œë°œíŒ€ ì†Œì† ì‚¬ìš©ì ëª¨ë‘ ì°¾ê¸°
GET /users/_search
{
  "query": {
    "term": {
      "department": "ê°œë°œíŒ€"
    }
  }
}
```

**4-2. ë¹„í™œì„± ì‚¬ìš©ì ì‚­ì œ**
```bash
# is_active = falseì¸ ì‚¬ìš©ì ëª¨ë‘ ì‚­ì œ
POST /users/_delete_by_query
{
  "query": {
    "term": {
      "is_active": ???
    }
  }
}
```

**ê²€ì¦**:
```bash
# ì‚­ì œ í›„ ì „ì²´ ì‚¬ìš©ì ìˆ˜ í™•ì¸
GET /users/_count

# ë¹„í™œì„± ì‚¬ìš©ìê°€ ì‚¬ë¼ì¡ŒëŠ”ì§€ í™•ì¸
GET /users/_search
{
  "query": {"term": {"is_active": false}}
}
# ì˜ˆìƒ ê²°ê³¼: total.value = 0
```

---

## ğŸŸ¡ ì¤‘ê¸‰ ê³¼ì œ (Advanced)

### ê³¼ì œ 5: Settings ë¹„êµ ì‹¤í—˜

**ëª©í‘œ**: Settings ê°’ì— ë”°ë¥¸ ë™ì‘ ì°¨ì´ ì²´ê°

**ìš”êµ¬ì‚¬í•­**:

**5-1. ë¹ ë¥¸ ê°±ì‹  vs ëŠë¦° ê°±ì‹  ì¸ë±ìŠ¤**
```bash
# ì¸ë±ìŠ¤ A: 1ì´ˆ ê°±ì‹ 
PUT /test-fast
{
  "settings": {
    "refresh_interval": "1s"
  }
}

# ì¸ë±ìŠ¤ B: 30ì´ˆ ê°±ì‹ 
PUT /test-slow
{
  "settings": {
    "refresh_interval": "30s"
  }
}

# ë°ì´í„° ì¶”ê°€
POST /test-fast/_doc
{"message": "ë¹ ë¥¸ ì¸ë±ìŠ¤"}

POST /test-slow/_doc
{"message": "ëŠë¦° ì¸ë±ìŠ¤"}

# ì¦‰ì‹œ ê²€ìƒ‰ ì‹œë„ (ì¶”ê°€ ì§í›„)
GET /test-fast/_search
GET /test-slow/_search
```

**ì§ˆë¬¸ì— ë‹µí•˜ê¸°**:
1. test-fastëŠ” ëª‡ ì´ˆ í›„ì— ê²€ìƒ‰ë˜ë‚˜ìš”?
2. test-slowëŠ” ëª‡ ì´ˆ í›„ì— ê²€ìƒ‰ë˜ë‚˜ìš”?
3. ì‹¤ì‹œê°„ ì±„íŒ… ì„œë¹„ìŠ¤ëŠ” ì–´ë–¤ ì„¤ì •ì„ ì¨ì•¼ í• ê¹Œìš”?
4. ë¡œê·¸ ì €ì¥ìš© ì¸ë±ìŠ¤ëŠ” ì–´ë–¤ ì„¤ì •ì´ ì¢‹ì„ê¹Œìš”?

---

### ê³¼ì œ 6: Shard ë¶„ì‚° í™•ì¸

**ëª©í‘œ**: ìƒ¤ë“œê°€ ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ë¶„í• í•˜ëŠ”ì§€ ì´í•´

**ìš”êµ¬ì‚¬í•­**:

**6-1. ìƒ¤ë“œ 3ê°œ ì¸ë±ìŠ¤ ìƒì„±**
```bash
PUT /test-shards
{
  "settings": {
    "number_of_shards": 3,
    "number_of_replicas": 0
  }
}
```

**6-2. ë°ì´í„° 100ê°œ ì¶”ê°€**
```bash
# ê°„ë‹¨í•œ ìŠ¤í¬ë¦½íŠ¸ë¡œ 100ê°œ ì¶”ê°€
for i in {1..100}; do
  curl -X POST "http://localhost:30200/test-shards/_doc" \
    -H 'Content-Type: application/json' \
    -d "{\"id\": $i, \"message\": \"Test message $i\"}"
done
```

**6-3. ìƒ¤ë“œë³„ ë¬¸ì„œ ë¶„í¬ í™•ì¸**
```bash
GET /_cat/shards/test-shards?v

# ê²°ê³¼ ì˜ˆì‹œ:
# index       shard prirep state   docs
# test-shards 0     p      STARTED 33
# test-shards 1     p      STARTED 34
# test-shards 2     p      STARTED 33
```

**ì§ˆë¬¸ì— ë‹µí•˜ê¸°**:
1. ê° ìƒ¤ë“œì— ë¬¸ì„œê°€ ê· ë“±í•˜ê²Œ ë¶„ë°°ë˜ì—ˆë‚˜ìš”?
2. íŠ¹ì • ìƒ¤ë“œì—ë§Œ ë°ì´í„°ë¥¼ ë„£ì„ ìˆ˜ ìˆë‚˜ìš”?
3. ìƒ¤ë“œ ìˆ˜ë¥¼ 5ê°œë¡œ ë°”ê¾¸ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”?

---

### ê³¼ì œ 7: Replica ê³ ê°€ìš©ì„± ì‹¤í—˜

**ëª©í‘œ**: ë³µì œë³¸ì˜ ì—­í•  ì´í•´

**ìš”êµ¬ì‚¬í•­**:

**7-1. Replica ì—†ëŠ” ì¸ë±ìŠ¤**
```bash
PUT /no-replica
{
  "settings": {
    "number_of_replicas": 0
  }
}

# í´ëŸ¬ìŠ¤í„° ìƒíƒœ í™•ì¸
GET /_cluster/health?pretty

# ì˜ˆìƒ ê²°ê³¼: status = "yellow" or "green"
```

**7-2. Replica ì¶”ê°€**
```bash
PUT /no-replica/_settings
{
  "number_of_replicas": 1
}

# í´ëŸ¬ìŠ¤í„° ìƒíƒœ ë‹¤ì‹œ í™•ì¸
GET /_cluster/health?pretty

# ë‹¨ì¼ ë…¸ë“œì—ì„œëŠ” status = "yellow"
# (replicaë¥¼ ë°°ì¹˜í•  ë‹¤ë¥¸ ë…¸ë“œê°€ ì—†ìŒ)
```

**ì§ˆë¬¸ì— ë‹µí•˜ê¸°**:
1. ë‹¨ì¼ ë…¸ë“œì—ì„œ replicaë¥¼ 1ë¡œ ì„¤ì •í•˜ë©´ ì™œ yellow ìƒíƒœì¼ê¹Œìš”?
2. í”„ë¡œë•ì…˜ì—ì„œ replica 0ì€ ì–¸ì œ ì‚¬ìš©í•˜ë‚˜ìš”?
3. replica 2ëŠ” ì–´ë–¤ ê²½ìš°ì— í•„ìš”í• ê¹Œìš”?

---

### ê³¼ì œ 8: ëŒ€ëŸ‰ ë°ì´í„° ì„±ëŠ¥ ë¹„êµ

**ëª©í‘œ**: Bulk API vs ê°œë³„ ìš”ì²­ ì„±ëŠ¥ ì°¨ì´ ì²´ê°

**ìš”êµ¬ì‚¬í•­**:

**8-1. ê°œë³„ ìš”ì²­ (100ê°œ)**
```bash
# ì‹œê°„ ì¸¡ì • ì‹œì‘
start_time=$(date +%s)

for i in {1..100}; do
  curl -X POST "http://localhost:30200/test-individual/_doc" \
    -H 'Content-Type: application/json' \
    -d "{\"id\": $i}" \
    -s -o /dev/null
done

end_time=$(date +%s)
echo "ê°œë³„ ìš”ì²­ ì†Œìš” ì‹œê°„: $((end_time - start_time))ì´ˆ"
```

**8-2. Bulk ìš”ì²­ (100ê°œ)**
```bash
# bulk.json íŒŒì¼ ìƒì„± (100ê°œ ë¬¸ì„œ)
for i in {1..100}; do
  echo "{\"index\": {}}"
  echo "{\"id\": $i}"
done > bulk.json

# ì‹œê°„ ì¸¡ì •
start_time=$(date +%s)

curl -X POST "http://localhost:30200/test-bulk/_bulk" \
  -H 'Content-Type: application/json' \
  --data-binary @bulk.json

end_time=$(date +%s)
echo "Bulk ìš”ì²­ ì†Œìš” ì‹œê°„: $((end_time - start_time))ì´ˆ"
```

**ì§ˆë¬¸ì— ë‹µí•˜ê¸°**:
1. ì–´ëŠ ë°©ë²•ì´ ì–¼ë§ˆë‚˜ ë¹¨ëë‚˜ìš”?
2. 1000ê°œë©´ ì°¨ì´ê°€ ì–¼ë§ˆë‚˜ ë‚ ê¹Œìš”?
3. Bulk APIì˜ ì ì • í¬ê¸°ëŠ” ëª‡ ê°œì¼ê¹Œìš”?

---

## ğŸ”´ ê³ ê¸‰ ê³¼ì œ (Expert)

### ê³¼ì œ 9: í˜‘ì—… í”Œë«í¼ í”„ë¡œì íŠ¸ ì¸ë±ìŠ¤ ì„¤ê³„

**ëª©í‘œ**: ì‹¤ì œ ì„œë¹„ìŠ¤ ì‹œë‚˜ë¦¬ì˜¤ ì ìš©

**ìš”êµ¬ì‚¬í•­**:

**9-1. í”„ë¡œì íŠ¸ ì¸ë±ìŠ¤ ì„¤ê³„**
```
ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­:
- í”„ë¡œì íŠ¸ ì´ë¦„, ì„¤ëª…ìœ¼ë¡œ ì „ë¬¸ ê²€ìƒ‰
- ìƒíƒœë³„ í•„í„°ë§ (ì§„í–‰ì¤‘, ì™„ë£Œ, ë³´ë¥˜)
- ìƒì„±ì¼/ì™„ë£Œì¼ ë²”ìœ„ ê²€ìƒ‰
- ë‹´ë‹¹ìë³„ í”„ë¡œì íŠ¸ ê²€ìƒ‰
- íƒœê·¸ë³„ ë¶„ë¥˜

í•„ìš”í•œ í•„ë“œ:
- project_id
- name (ê²€ìƒ‰ ê°€ëŠ¥)
- description (ê²€ìƒ‰ ê°€ëŠ¥)
- status (í•„í„°ë§)
- owner (ë‹´ë‹¹ì)
- members (ë°°ì—´)
- tags (ë°°ì—´)
- created_at
- completed_at
- priority (ë†’ìŒ/ì¤‘ê°„/ë‚®ìŒ)
```

**ì§ì ‘ ì„¤ê³„í•˜ê¸°**:
```json
PUT /projects
{
  "settings": {
    "number_of_shards": ???,      // ì˜ˆìƒ ë°ì´í„° í¬ê¸° ê³ ë ¤
    "number_of_replicas": ???,    // ì¤‘ìš”ë„ ê³ ë ¤
    "refresh_interval": ???       // ì‹¤ì‹œê°„ì„± ê³ ë ¤
  },
  "mappings": {
    "properties": {
      "project_id": {"type": "???"},
      "name": {"type": "???"},
      // ë‚˜ë¨¸ì§€ í•„ë“œ ì„¤ê³„
    }
  }
}
```

**ìƒ˜í”Œ ë°ì´í„° 5ê°œ ì¶”ê°€**:
```bash
POST /projects/_bulk
{"index": {"_id": "proj_001"}}
{"project_id": "P001", "name": "ERP ì‹œìŠ¤í…œ êµ¬ì¶•", "status": "ì§„í–‰ì¤‘", ...}
// 4ê°œ ë” ì¶”ê°€
```

---

### ê³¼ì œ 10: ë³µí•© ê²€ìƒ‰ ì¿¼ë¦¬ êµ¬í˜„

**ëª©í‘œ**: Bool ì¿¼ë¦¬ë¥¼ í™œìš©í•œ ì‹¤ì „ ê²€ìƒ‰

**ìš”êµ¬ì‚¬í•­**:

**10-1. ì§„í–‰ì¤‘ì¸ í”„ë¡œì íŠ¸ ì¤‘ "ì‹œìŠ¤í…œ" í¬í•¨**
```bash
GET /projects/_search
{
  "query": {
    "bool": {
      "must": [
        {"match": {"name": "ì‹œìŠ¤í…œ"}}
      ],
      "filter": [
        {"term": {"status": "ì§„í–‰ì¤‘"}}
      ]
    }
  }
}
```

**10-2. íŠ¹ì • ë‹´ë‹¹ì + ë†’ì€ ìš°ì„ ìˆœìœ„ + ë¯¸ì™„ë£Œ**
```bash
GET /projects/_search
{
  "query": {
    "bool": {
      "filter": [
        {"term": {"owner": "í™ê¸¸ë™"}},
        {"term": {"priority": "ë†’ìŒ"}},
        {"range": {"completed_at": {"gte": "now"}}}  // ì™„ë£Œì¼ì´ ë¯¸ë˜ = ë¯¸ì™„ë£Œ
      ]
    }
  }
}
```

**10-3. íŠ¹ì • íƒœê·¸ ì¤‘ í•˜ë‚˜ë¼ë„ í¬í•¨ + ë‚ ì§œ ë²”ìœ„**
```bash
GET /projects/_search
{
  "query": {
    "bool": {
      "must": [
        {"terms": {"tags": ["ë°±ì—”ë“œ", "ì¸í”„ë¼"]}}
      ],
      "filter": [
        {
          "range": {
            "created_at": {
              "gte": "2025-01-01",
              "lte": "2025-12-31"
            }
          }
        }
      ]
    }
  }
}
```

---

### ê³¼ì œ 11: í†µê³„ ë° ì§‘ê³„

**ëª©í‘œ**: Aggregationì„ í™œìš©í•œ ë°ì´í„° ë¶„ì„

**ìš”êµ¬ì‚¬í•­**:

**11-1. ìƒíƒœë³„ í”„ë¡œì íŠ¸ ê°œìˆ˜**
```bash
GET /projects/_search
{
  "size": 0,
  "aggs": {
    "by_status": {
      "terms": {
        "field": "status"
      }
    }
  }
}
```

**11-2. ë‹´ë‹¹ìë³„ í”„ë¡œì íŠ¸ ê°œìˆ˜ (Top 5)**
```bash
GET /projects/_search
{
  "size": 0,
  "aggs": {
    "top_owners": {
      "terms": {
        "field": "owner",
        "size": 5
      }
    }
  }
}
```

**11-3. ì›”ë³„ í”„ë¡œì íŠ¸ ìƒì„± ì¶”ì´**
```bash
GET /projects/_search
{
  "size": 0,
  "aggs": {
    "projects_over_time": {
      "date_histogram": {
        "field": "created_at",
        "calendar_interval": "month"
      }
    }
  }
}
```

**11-4. ìš°ì„ ìˆœìœ„ë³„ í‰ê·  ì™„ë£Œ ì‹œê°„ (ì¤‘ì²© ì§‘ê³„)**
```bash
GET /projects/_search
{
  "size": 0,
  "aggs": {
    "by_priority": {
      "terms": {
        "field": "priority"
      },
      "aggs": {
        "avg_duration": {
          "avg": {
            "script": {
              "source": "doc['completed_at'].value.millis - doc['created_at'].value.millis"
            }
          }
        }
      }
    }
  }
}
```

---

### ê³¼ì œ 12: ì¸ë±ìŠ¤ ìµœì í™” ë° Reindex

**ëª©í‘œ**: ìš´ì˜ ì¤‘ ì¸ë±ìŠ¤ ê°œì„  ì‹œë‚˜ë¦¬ì˜¤

**ì‹œë‚˜ë¦¬ì˜¤**:
```
ìš´ì˜ ì¤‘ì¸ messages ì¸ë±ìŠ¤ì˜ ë¬¸ì œì :
1. ìƒ¤ë“œê°€ 1ê°œë¼ì„œ ê²€ìƒ‰ì´ ëŠë¦¼
2. í•œê¸€ ê²€ìƒ‰ í’ˆì§ˆì´ ë‚®ìŒ (standard analyzer)
3. replicaê°€ 0ì´ë¼ ì¥ì•  ìœ„í—˜

í•´ê²° ë°©ë²•:
1. ìƒ¤ë“œ 3ê°œë¡œ ì¦ê°€
2. nori analyzer ì ìš© (í•œê¸€ í˜•íƒœì†Œ)
3. replica 1ê°œ ì¶”ê°€
```

**ìš”êµ¬ì‚¬í•­**:

**12-1. ìƒˆ ì¸ë±ìŠ¤ ì„¤ê³„**
```bash
PUT /messages_v2
{
  "settings": {
    "number_of_shards": 3,
    "number_of_replicas": 1,
    "analysis": {
      "analyzer": {
        "korean": {
          "type": "nori"
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "content": {
        "type": "text",
        "analyzer": "korean"
      },
      "author": {"type": "keyword"},
      "channel": {"type": "keyword"},
      "created_at": {"type": "date"}
    }
  }
}
```

**12-2. ë°ì´í„° ì´ê´€ (Reindex)**
```bash
POST /_reindex
{
  "source": {
    "index": "messages"
  },
  "dest": {
    "index": "messages_v2"
  }
}
```

**12-3. ë³„ì¹­ìœ¼ë¡œ ë¬´ì¤‘ë‹¨ ì „í™˜**
```bash
# ê¸°ì¡´ ë³„ì¹­ ì œê±° + ìƒˆ ë³„ì¹­ ì¶”ê°€ (ì›ìì  ì‹¤í–‰)
POST /_aliases
{
  "actions": [
    {"remove": {"index": "messages", "alias": "messages_current"}},
    {"add": {"index": "messages_v2", "alias": "messages_current"}}
  ]
}

# ì´ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ "messages_current" ì‚¬ìš©
GET /messages_current/_search
```

**12-4. êµ¬ ì¸ë±ìŠ¤ ì‚­ì œ**
```bash
# ì¶©ë¶„í•œ ê²€ì¦ í›„
DELETE /messages
```

---

## ğŸ“ ë³´ë„ˆìŠ¤ ê³¼ì œ

### ê³¼ì œ 13: ìë™ì™„ì„± êµ¬í˜„

**ëª©í‘œ**: Prefix ì¿¼ë¦¬ë¡œ ì‚¬ìš©ìëª… ìë™ì™„ì„±

```bash
# ì‚¬ìš©ìê°€ "hong" ì…ë ¥ ì‹œ
GET /users/_search
{
  "query": {
    "prefix": {
      "username": "hong"
    }
  }
}

# ê²°ê³¼: "hongkildong", "hongchulsoo" ë“± ë°˜í™˜
```

---

### ê³¼ì œ 14: ì˜¤íƒ€ í—ˆìš© ê²€ìƒ‰

**ëª©í‘œ**: Fuzzy ì¿¼ë¦¬ë¡œ ì˜¤íƒ€ ëŒ€ì‘

```bash
# "Elasticsarch" (ì˜¤íƒ€) ê²€ìƒ‰
GET /projects/_search
{
  "query": {
    "fuzzy": {
      "name": {
        "value": "Elasticsarch",
        "fuzziness": "AUTO"
      }
    }
  }
}

# "Elasticsearch" í¬í•¨ í”„ë¡œì íŠ¸ë„ ê²€ìƒ‰ë¨
```

---

### ê³¼ì œ 15: ë©€í‹° ì¸ë±ìŠ¤ ê²€ìƒ‰

**ëª©í‘œ**: ì—¬ëŸ¬ ì¸ë±ìŠ¤ ë™ì‹œ ê²€ìƒ‰

```bash
# messagesì™€ projects ì¸ë±ìŠ¤ ë™ì‹œ ê²€ìƒ‰
GET /messages,projects/_search
{
  "query": {
    "multi_match": {
      "query": "ë°°í¬",
      "fields": ["content", "name", "description"]
    }
  }
}
```

---

## ğŸ“Š ê³¼ì œ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ğŸŸ¢ ê¸°ë³¸ ê³¼ì œ
- [ ] ê³¼ì œ 1: users ì¸ë±ìŠ¤ ìƒì„±
- [ ] ê³¼ì œ 2: íŒ€ì› 5ëª… Bulk ì¶”ê°€
- [ ] ê³¼ì œ 3: ì‚¬ìš©ì ì •ë³´ 3ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ìˆ˜ì •
- [ ] ê³¼ì œ 4: ì¡°ê±´ë¶€ ê²€ìƒ‰ ë° ì‚­ì œ

### ğŸŸ¡ ì¤‘ê¸‰ ê³¼ì œ
- [ ] ê³¼ì œ 5: refresh_interval ë¹„êµ ì‹¤í—˜
- [ ] ê³¼ì œ 6: Shard ë¶„ì‚° í™•ì¸
- [ ] ê³¼ì œ 7: Replica ê³ ê°€ìš©ì„± ì´í•´
- [ ] ê³¼ì œ 8: Bulk vs ê°œë³„ ìš”ì²­ ì„±ëŠ¥ ë¹„êµ

### ğŸ”´ ê³ ê¸‰ ê³¼ì œ
- [ ] ê³¼ì œ 9: projects ì¸ë±ìŠ¤ ì„¤ê³„
- [ ] ê³¼ì œ 10: ë³µí•© ê²€ìƒ‰ ì¿¼ë¦¬ 3ê°œ
- [ ] ê³¼ì œ 11: Aggregation 4ê°œ ìœ í˜•
- [ ] ê³¼ì œ 12: Reindex ë° ë¬´ì¤‘ë‹¨ ì „í™˜

### ğŸ“ ë³´ë„ˆìŠ¤
- [ ] ê³¼ì œ 13: ìë™ì™„ì„±
- [ ] ê³¼ì œ 14: ì˜¤íƒ€ í—ˆìš© ê²€ìƒ‰
- [ ] ê³¼ì œ 15: ë©€í‹° ì¸ë±ìŠ¤ ê²€ìƒ‰

---

## ğŸ’¡ ê³¼ì œ ìˆ˜í–‰ íŒ

### 1. ë‹¨ê³„ë³„ ê²€ì¦
ë§¤ ê³¼ì œë§ˆë‹¤ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”:
```bash
# ì¸ë±ìŠ¤ ìƒì„± í›„
GET /_cat/indices?v

# ë°ì´í„° ì¶”ê°€ í›„
GET /ì¸ë±ìŠ¤ëª…/_count

# ì„¤ì • ë³€ê²½ í›„
GET /ì¸ë±ìŠ¤ëª…/_settings
```

### 2. ì—ëŸ¬ í•´ê²°
ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ìì„¸íˆ ì½ì–´ë³´ì„¸ìš”:
```bash
# ìƒì„¸í•œ ì—ëŸ¬ ì •ë³´
GET /ì¸ë±ìŠ¤ëª…/_search?error_trace=true
```

### 3. ë¬¸ì„œ ì°¸ê³ 
ë§‰í ë•ŒëŠ” ì‘ì„±í•œ í•™ìŠµ ë¬¸ì„œë¥¼ ì°¸ê³ :
- `01-basic-concepts.md`: ìš©ì–´ ì •ë¦¬
- `03-crud-operations.md`: CRUD ë¬¸ë²•
- `03-1-index-settings-deep-dive.md`: Settings ìƒì„¸
- `04-search-queries.md`: ê²€ìƒ‰ ì¿¼ë¦¬
- `99-troubleshooting.md`: ë¬¸ì œ í•´ê²°

### 4. ì‹¤í—˜ ì •ì‹ 
- ê°’ì„ ë°”ê¿”ë³´ì„¸ìš” (refresh_interval: 1s â†’ 60s)
- í•„ë“œ íƒ€ì…ì„ ë°”ê¿”ë³´ì„¸ìš” (text â†’ keyword)
- ì—ëŸ¬ê°€ ë‚˜ë„ ê´œì°®ìŠµë‹ˆë‹¤. ë°°ìš°ëŠ” ê³¼ì •ì…ë‹ˆë‹¤!

---

## ğŸ¯ ì™„ë£Œ í›„ ì–»ì„ ìˆ˜ ìˆëŠ” ê²ƒ

ì´ ê³¼ì œë“¤ì„ ëª¨ë‘ ì™„ë£Œí•˜ë©´:
- âœ… Elasticsearch ê¸°ë³¸ CRUD ì™„ë²½ ìˆ™ì§€
- âœ… Index Settingsì˜ ì‹¤ì „ ì ìš© ëŠ¥ë ¥
- âœ… ì„±ëŠ¥ ìµœì í™” ê¸°ë³¸ ê°œë… ì´í•´
- âœ… í˜‘ì—… í”Œë«í¼ ê²€ìƒ‰ ì‹œìŠ¤í…œ ì„¤ê³„ ëŠ¥ë ¥
- âœ… ìš´ì˜ ì¤‘ ì¸ë±ìŠ¤ ê°œì„  ë…¸í•˜ìš°

---

## ğŸ“ ì œì¶œ (ì„ íƒ)

ê³¼ì œë¥¼ ì™„ë£Œí•˜ë©´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ê¸°ë¡í•˜ì„¸ìš”:

```markdown
# ê³¼ì œ X ì™„ë£Œ

## ì‹¤í–‰ ì½”ë“œ
\`\`\`bash
ì‹¤ì œ ì‹¤í–‰í•œ ëª…ë ¹ì–´
\`\`\`

## ê²°ê³¼
\`\`\`json
ì‘ë‹µ ê²°ê³¼
\`\`\`

## ë°°ìš´ ì 
- í•µì‹¬ ê¹¨ë‹¬ìŒ 1
- í•µì‹¬ ê¹¨ë‹¬ìŒ 2

## ì§ˆë¬¸
- ê¶ê¸ˆí•œ ì ì´ë‚˜ ì–´ë ¤ì› ë˜ ë¶€ë¶„
\`\`\`

ì´ ë‚´ìš©ì„ `docs/my-exercises.md`ì— ê¸°ë¡í•˜ì„¸ìš”!
