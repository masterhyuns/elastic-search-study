@startuml mixed-state-management-structure
' ============================================================
' í…œí”Œë¦¿: í˜¼í•© ìƒíƒœ ê´€ë¦¬ ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
' ì‚¬ìš© ì‚¬ë¡€:
'   - Props Drilling + Context + Zustand í˜¼ì¬ ìƒí™© ì‹œê°í™”
'   - ë ˆê±°ì‹œ ì½”ë“œ ë¦¬íŒ©í† ë§ ì „ í˜„í™© íŒŒì•…
'   - ì¡°ê±´ë¶€ ë Œë”ë§ + ë‹¤ì–‘í•œ ìƒíƒœ ì†ŒìŠ¤ í‘œí˜„
'   - ì‹¤ì œ í”„ë¡œë•ì…˜ ì½”ë“œì˜ ë³µì¡ì„± ë¬¸ì„œí™”
' PlantUML íƒ€ì…: Class Diagram (ìƒíƒœ ì €ì¥ì†Œ êµ¬ì¡° í‘œí˜„)
' ============================================================

!theme plain
skinparam backgroundColor white

' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
' ìŠ¤íƒ€ì¼ ì •ì˜ (ìƒíƒœ ì†ŒìŠ¤ë³„ ìƒ‰ìƒ êµ¬ë¶„)
' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
skinparam class {
  BackgroundColor<<parent>> #E8E8E8
  BackgroundColor<<child>> #F0F0F0
  BackgroundColor<<props>> #D4E6F1
  BackgroundColor<<context>> #D5F4E6
  BackgroundColor<<zustand>> #FCE4D6
  BackgroundColor<<mixed>> #F9E79F
  BackgroundColor<<useState>> #E8E8E8
  BorderColor Black
  FontSize 11
}

skinparam package {
  BackgroundColor #FAFAFA
  BorderColor #888888
  BorderThickness 2
}

' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
' ìƒíƒœ ì €ì¥ì†Œë“¤ (State Sources)
' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
class "useState\n(Parent State)" as ParentState <<useState>> {
  **DashboardPage ë‚´ë¶€ ìƒíƒœ**
  ----
  - user: User | null
  - isLoading: boolean
  - filters: FilterConfig
  - selectedTab: string
}

class ThemeContext <<context>> {
  **ì „ì—­ í…Œë§ˆ ê´€ë¦¬**
  ----
  - theme: 'light' | 'dark'
  + toggleTheme(): void
}

class "useAuthStore\n(Zustand)" as AuthStore <<zustand>> {
  **ì¸ì¦ ìƒíƒœ**
  ----
  - user: User | null
  - isAuthenticated: boolean
  + login(): void
  + logout(): void
}

class "useTodoStore\n(Zustand)" as TodoStore <<zustand>> {
  **Todo ë°ì´í„°**
  ----
  - todos: Todo[]
  + addTodo(): void
  + removeTodo(): void
}

' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
' ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬
' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
package "Dashboard Application" {
  class DashboardPage <<parent>>

  package "Header Section" {
    class Header <<props>>
    class UserProfile <<zustand>>
    class ThemeToggle <<context>>
  }

  package "Sidebar Section" {
    class Sidebar <<context>>
    class Navigation <<props>>
  }

  package "Main Content" #line.dashed {
    note as ContentNote
      **ì¡°ê±´ë¶€ ë Œë”ë§**
      selectedTab === 'todos'
      ? <TodoSection />
      : <AnalyticsSection />
    end note

    class TodoSection <<zustand>>
    class AnalyticsSection <<mixed>>
  }

  class Footer <<props>>
}

' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
' ì»´í¬ë„ŒíŠ¸ ê³„ì¸µ êµ¬ì¡° (ë¶€ëª¨-ìì‹ ê´€ê³„)
' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
DashboardPage --> Header : children
DashboardPage --> Sidebar : children
DashboardPage --> TodoSection : conditional
DashboardPage --> AnalyticsSection : conditional
DashboardPage --> Footer : children

Header --> UserProfile : children
Header --> ThemeToggle : children

Sidebar --> Navigation : children

' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
' Props Drilling (ì „í†µì ì¸ Props ì „ë‹¬)
' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ParentState -[#4A90E2,thickness=2]-> DashboardPage : **manages**

DashboardPage -[#4A90E2,dashed]-> Header : **props**\nuser, isLoading
DashboardPage -[#4A90E2,dashed]-> Sidebar : **props**\nfilters
DashboardPage -[#4A90E2,dashed]-> Footer : **props**\nuser
DashboardPage -[#4A90E2,dashed]-> AnalyticsSection : **props**\nfilters, selectedTab

Header -[#4A90E2,dashed]-> Navigation : **props**\nuser (ì¬ì „ë‹¬)

' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
' Context API ì‚¬ìš© (Provider-Consumer)
' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ThemeContext .[#50C878,thickness=2].> Sidebar : **consumes**\ntheme
ThemeContext .[#50C878,thickness=2].> ThemeToggle : **consumes**\ntheme, toggleTheme
ThemeContext .[#50C878,thickness=2].> AnalyticsSection : **consumes**\ntheme

' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
' Zustand Store êµ¬ë…
' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
AuthStore .[#E89A3C,thickness=2].> UserProfile : **subscribes**\nuser, logout
TodoStore .[#E89A3C,thickness=2].> TodoSection : **subscribes**\ntodos, addTodo
TodoStore .[#E89A3C,thickness=2].> AnalyticsSection : **subscribes**\ntodos.length

' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
' ê° ì»´í¬ë„ŒíŠ¸ë³„ ìƒì„¸ ì„¤ëª…
' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
note top of DashboardPage
  **DashboardPage** (ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸)

  ```tsx
  'use client'
  import { useState } from 'react'

  export const DashboardPage = () => {
    // â¶ useStateë¡œ ë¡œì»¬ ìƒíƒœ ê´€ë¦¬
    const [user, setUser] = useState<User | null>(null)
    const [isLoading, setIsLoading] = useState(true)
    const [filters, setFilters] = useState<FilterConfig>({})
    const [selectedTab, setSelectedTab] = useState('todos')

    // â· Props Drillingìœ¼ë¡œ ìì‹ë“¤ì—ê²Œ ì „ë‹¬
    return (
      <div>
        <Header user={user} isLoading={isLoading} />
        <Sidebar filters={filters} />

        {/* â¸ ì¡°ê±´ë¶€ ë Œë”ë§ */}
        {selectedTab === 'todos' ? (
          <TodoSection />
        ) : (
          <AnalyticsSection
            filters={filters}
            selectedTab={selectedTab}
          />
        )}

        <Footer user={user} />
      </div>
    )
  }
  ```

  **ìƒíƒœ ê´€ë¦¬ ë°©ì‹**:
  - useState: user, isLoading, filters, selectedTab
  - Propsë¡œ ìì‹ë“¤ì—ê²Œ ì „ë‹¬ (drilling)
  - selectedTabì— ë”°ë¼ ì¡°ê±´ë¶€ ë Œë”ë§
end note

note right of UserProfile
  **UserProfile** (Zustand ì§ì ‘ ì‚¬ìš©)

  ```tsx
  import { useAuthStore } from '@/stores/auth'

  export const UserProfile = () => {
    // â¶ Propsë¡œ ë°›ì€ userëŠ” ë¬´ì‹œ
    // â· Zustandì—ì„œ ì§ì ‘ ê°€ì ¸ì˜´ (ì¤‘ë³µ!)
    const user = useAuthStore(state => state.user)
    const logout = useAuthStore(state => state.logout)

    if (!user) return null

    return (
      <div>
        <img src={user.avatar} />
        <span>{user.name}</span>
        <button onClick={logout}>Logout</button>
      </div>
    )
  }
  ```

  **ë¬¸ì œì **:
  - Headerê°€ propsë¡œ userë¥¼ ì „ë‹¬í–ˆì§€ë§Œ ì‚¬ìš© ì•ˆ í•¨
  - Zustandì—ì„œ ì§ì ‘ êµ¬ë… (Props Drilling ë¶ˆí•„ìš”)

  **ê°œì„  ë°©í–¥**:
  - DashboardPageì—ì„œ user useState ì œê±°
  - Headerë„ props ë°›ì„ í•„ìš” ì—†ìŒ
end note

note bottom of AnalyticsSection
  **AnalyticsSection** (í˜¼í•© ì‚¬ìš© - ê°€ì¥ ë³µì¡)

  ```tsx
  import { useContext } from 'react'
  import { ThemeContext } from '@/contexts/theme'
  import { useTodoStore } from '@/stores/todo'

  type Props = {
    filters: FilterConfig        // Props Drilling
    selectedTab: string          // Props Drilling
  }

  export const AnalyticsSection = ({
    filters,
    selectedTab
  }: Props) => {
    // â¶ Props Drillingìœ¼ë¡œ ë°›ì€ ê°’
    console.log('Current filters:', filters)
    console.log('Selected tab:', selectedTab)

    // â· Context API ì‚¬ìš©
    const { theme } = useContext(ThemeContext)

    // â¸ Zustand Store ì‚¬ìš©
    const totalTodos = useTodoStore(
      state => state.todos.length
    )

    return (
      <div className={theme === 'dark' ? 'dark' : ''}>
        <h2>Analytics</h2>
        <p>Total Tasks: {totalTodos}</p>
        <p>Active Filters: {Object.keys(filters).length}</p>
        {/* selectedTabì— ë”°ë¼ ë‹¤ë¥¸ ì°¨íŠ¸ í‘œì‹œ */}
      </div>
    )
  }
  ```

  **3ê°€ì§€ ìƒíƒœ ì†ŒìŠ¤ í˜¼ì¬**:
  1. Props: filters, selectedTab (ë¶€ëª¨ì—ì„œ ì „ë‹¬)
  2. Context: theme (ThemeContext)
  3. Zustand: todos.length (useTodoStore)

  **ë¦¬íŒ©í† ë§ ê³ ë ¤ì‚¬í•­**:
  - filtersë¥¼ Zustand Storeë¡œ ì´ë™?
  - selectedTabì„ URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ?
  - 3ê°€ì§€ ì†ŒìŠ¤ë¥¼ 2ê°€ì§€ë¡œ ì¤„ì¼ ìˆ˜ ìˆëŠ”ì§€ ê²€í† 
end note

note left of Sidebar
  **Sidebar** (Props + Context)

  ```tsx
  import { useContext } from 'react'
  import { ThemeContext } from '@/contexts/theme'

  type Props = {
    filters: FilterConfig  // Props Drilling
  }

  export const Sidebar = ({ filters }: Props) => {
    // â¶ Propsë¡œ ë°›ì€ filters
    const activeFilters = Object.entries(filters)
      .filter(([_, value]) => value)

    // â· Contextì—ì„œ theme ê°€ì ¸ì˜´
    const { theme } = useContext(ThemeContext)

    return (
      <aside className={theme === 'dark' ? 'dark' : ''}>
        <h3>Filters</h3>
        <ul>
          {activeFilters.map(([key, value]) => (
            <li key={key}>{key}: {value}</li>
          ))}
        </ul>
        <Navigation user={/* Propsë¡œ ë°›ì•˜ì§€ë§Œ ì—†ìŒ */} />
      </aside>
    )
  }
  ```

  **2ê°€ì§€ ìƒíƒœ ì†ŒìŠ¤**:
  1. Props: filters (ë¶€ëª¨ì—ì„œ ì „ë‹¬)
  2. Context: theme (ì „ì—­)
end note

note right of TodoSection
  **TodoSection** (Zustandë§Œ ì‚¬ìš© - ê¹”ë”)

  ```tsx
  import { useTodoStore } from '@/stores/todo'

  export const TodoSection = () => {
    // âœ… Zustandë§Œ ì‚¬ìš© (ê¹”ë”)
    const todos = useTodoStore(state => state.todos)
    const addTodo = useTodoStore(state => state.addTodo)
    const removeTodo = useTodoStore(state => state.removeTodo)

    return (
      <div>
        <h2>Todo List</h2>
        <ul>
          {todos.map(todo => (
            <li key={todo.id}>
              {todo.title}
              <button onClick={() => removeTodo(todo.id)}>
                Delete
              </button>
            </li>
          ))}
        </ul>
        <button onClick={() => addTodo('New Task')}>
          Add Todo
        </button>
      </div>
    )
  }
  ```

  **ë‹¨ì¼ ìƒíƒœ ì†ŒìŠ¤**:
  - Zustandë§Œ ì‚¬ìš© (ì´ìƒì )
  - Propsë‚˜ Context ë¶ˆí•„ìš”
  - ë¶€ëª¨ ë¦¬ë Œë”ë§ì— ì˜í–¥ ì•ˆ ë°›ìŒ
end note

' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
' ë²”ë¡€
' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
legend right
  **ìƒíƒœ ê´€ë¦¬ ë°©ì‹ë³„ êµ¬ë¶„**

  **ì»´í¬ë„ŒíŠ¸ ë°°ê²½ìƒ‰**:
  | ìƒ‰ìƒ | ìƒíƒœ ì†ŒìŠ¤ |
  | íšŒìƒ‰ | Parent (useState) |
  | íŒŒë€ìƒ‰ | Props Drillingë§Œ |
  | ì´ˆë¡ìƒ‰ | Contextë§Œ |
  | ì£¼í™©ìƒ‰ | Zustandë§Œ |
  | ë…¸ë€ìƒ‰ | í˜¼í•© (2ê°œ ì´ìƒ) |

  **í™”ì‚´í‘œ ìƒ‰ìƒ**:
  | ìƒ‰ìƒ | ì˜ë¯¸ |
  | íŒŒë€ìƒ‰ ì‹¤ì„  | useState ê´€ë¦¬ |
  | íŒŒë€ìƒ‰ ì ì„  | Props ì „ë‹¬ |
  | ì´ˆë¡ìƒ‰ ì ì„  | Context êµ¬ë… |
  | ì£¼í™©ìƒ‰ ì ì„  | Zustand êµ¬ë… |

  **ë¦¬íŒ©í† ë§ ìš°ì„ ìˆœìœ„**:
  1. ğŸ”´ í˜¼í•© ì»´í¬ë„ŒíŠ¸ (AnalyticsSection) - ë³µì¡ë„ ìµœê³ 
  2. ğŸŸ¡ ë¶ˆí•„ìš”í•œ Props Drilling (UserProfile)
  3. ğŸŸ¢ ë‹¨ì¼ ì†ŒìŠ¤ ì»´í¬ë„ŒíŠ¸ (TodoSection) - ìœ ì§€

  **ê°œì„  ì „ëµ**:
  - Props Drilling â†’ Zustand ë˜ëŠ” Contextë¡œ í†µì¼
  - ì¡°ê±´ë¶€ ë Œë”ë§ â†’ URL ê¸°ë°˜ ë¼ìš°íŒ…
  - í˜¼í•© ì‚¬ìš© â†’ ë‹¨ì¼ íŒ¨í„´ìœ¼ë¡œ ì •ë¦¬
endlegend

@enduml

' ============================================================
' 2. ë°ì´í„° í”Œë¡œìš° ë‹¤ì´ì–´ê·¸ë¨ (Sequence)
' ============================================================

@startuml mixed-state-data-flow
!theme plain
skinparam backgroundColor white

skinparam sequence {
  ArrowColor Black
  ActorBorderColor Black
  LifeLineBorderColor #888888
  LifeLineBackgroundColor #F8F8F8
  ParticipantBorderColor Black
  ParticipantBackgroundColor #F0F0F0
}

actor "ì‚¬ìš©ì" as User

box "Parent State (useState)" #E8E8E8
  participant "DashboardPage" as Dashboard
end box

box "Props Drilling" #D4E6F1
  participant "Header" as Header
  participant "Sidebar" as Sidebar
end box

box "Context API" #D5F4E6
  participant "ThemeContext" as ThemeCtx
  participant "ThemeToggle" as ThemeToggle
end box

box "Zustand Store" #FCE4D6
  participant "useAuthStore" as AuthStore
  participant "UserProfile" as UserProfile
end box

autonumber

== ì´ˆê¸° ë Œë”ë§: ì—¬ëŸ¬ ìƒíƒœ ì†ŒìŠ¤ ë™ì‹œ ë¡œë“œ ==

Dashboard -> Dashboard : useState ì´ˆê¸°í™”\nuser, filters, selectedTab
activate Dashboard

Dashboard -> Header : **props drilling**\nuser, isLoading
activate Header

Header -> UserProfile : children ë Œë”ë§
activate UserProfile

UserProfile -> AuthStore : **useAuthStore()**\nuser êµ¬ë…
activate AuthStore
note right
  âš ï¸ ë¬¸ì œ: Propsë¡œ ë°›ì€ user ë¬´ì‹œ
  Zustandì—ì„œ ì§ì ‘ ê°€ì ¸ì˜´
end note
AuthStore --> UserProfile : user ë°˜í™˜
deactivate AuthStore

deactivate UserProfile
deactivate Header

Dashboard -> Sidebar : **props drilling**\nfilters
activate Sidebar

Sidebar -> ThemeCtx : **useContext(ThemeContext)**
activate ThemeCtx
ThemeCtx --> Sidebar : theme ë°˜í™˜
deactivate ThemeCtx

deactivate Sidebar
deactivate Dashboard

== ì‚¬ìš©ì ì•¡ì…˜ 1: í…Œë§ˆ ë³€ê²½ (Context) ==

User -> ThemeToggle : í† ê¸€ ë²„íŠ¼ í´ë¦­
activate ThemeToggle

ThemeToggle -> ThemeCtx : **toggleTheme()**
activate ThemeCtx

ThemeCtx -> ThemeCtx : theme ìƒíƒœ ë³€ê²½\n'light' â†’ 'dark'

ThemeCtx --> Sidebar : ğŸ”„ **ë¦¬ë Œë”ë§**\n(Context êµ¬ë…ì)
activate Sidebar
note right
  theme ê°’ì´ ë³€ê²½ë˜ì–´
  Sidebar ë¦¬ë Œë”ë§
end note
deactivate Sidebar

ThemeCtx --> ThemeToggle : ğŸ”„ **ë¦¬ë Œë”ë§**
deactivate ThemeCtx
deactivate ThemeToggle

note over User, ThemeToggle
  **Context íŠ¹ì§•**:
  - Provider í•˜ìœ„ ëª¨ë“  Consumer ë¦¬ë Œë”ë§ ê°€ëŠ¥
  - DashboardëŠ” ë¦¬ë Œë”ë§ ì•ˆ ë¨ (êµ¬ë… ì•ˆ í•¨)
end note

== ì‚¬ìš©ì ì•¡ì…˜ 2: ë¡œê·¸ì•„ì›ƒ (Zustand) ==

User -> UserProfile : Logout ë²„íŠ¼ í´ë¦­
activate UserProfile

UserProfile -> AuthStore : **logout()**
activate AuthStore

AuthStore -> AuthStore : set({ user: null })

AuthStore --> UserProfile : ğŸ”„ **ë¦¬ë Œë”ë§**\n(user êµ¬ë…ì)
deactivate AuthStore

UserProfile -> UserProfile : user === null\nâ†’ null ë°˜í™˜
deactivate UserProfile

note over User, AuthStore
  **ë¬¸ì œì **:
  - Dashboardì˜ useState userëŠ” ê·¸ëŒ€ë¡œ ë‚¨ìŒ
  - HeaderëŠ” ì—¬ì „íˆ ì´ì „ userë¥¼ propsë¡œ ë°›ìŒ
  - ë°ì´í„° ë¶ˆì¼ì¹˜ ë°œìƒ!

  **í•´ê²°ì±…**:
  - Dashboardì—ì„œ user useState ì œê±°
  - ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ AuthStore ì§ì ‘ êµ¬ë…
end note

== ì‚¬ìš©ì ì•¡ì…˜ 3: í•„í„° ë³€ê²½ (Props Drilling) ==

User -> Dashboard : í•„í„° UI ì¡°ì‘
activate Dashboard

Dashboard -> Dashboard : **setFilters({ ... })**\nìƒˆë¡œìš´ filters ê°ì²´ ìƒì„±

Dashboard --> Sidebar : ğŸ”„ **ë¦¬ë Œë”ë§**\n(props ë³€ê²½)
activate Sidebar
note right
  filtersê°€ ìƒˆ ê°ì²´ë¼ì„œ
  Sidebar ë¦¬ë Œë”ë§
end note
deactivate Sidebar

Dashboard --> Header : ğŸ”„ **ë¦¬ë Œë”ë§**\n(ë¶€ëª¨ ë¦¬ë Œë”ë§)
activate Header
note right
  filtersëŠ” ì•ˆ ë°›ì§€ë§Œ
  ë¶€ëª¨ê°€ ë¦¬ë Œë”ë§ë˜ì–´
  Headerë„ ë¦¬ë Œë”ë§ (ë¶ˆí•„ìš”)
end note

Header --> UserProfile : ğŸ”„ **ë¦¬ë Œë”ë§**\n(ë¶€ëª¨ ë¦¬ë Œë”ë§)
activate UserProfile
note right
  âš ï¸ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§!
  UserProfileì€ filters ì•ˆ ì”€
end note
deactivate UserProfile
deactivate Header

deactivate Dashboard

note over User, Dashboard
  **Props Drilling ë¬¸ì œì **:
  - ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§
  - filters ë³€ê²½ ì‹œ Header, UserProfileë„ ë¦¬ë Œë”ë§
  - React.memoë¡œ ìµœì í™” í•„ìš”

  **Zustand ì‚¬ìš© ì‹œ**:
  - filtersë¥¼ Storeë¡œ ì´ë™
  - Sidebarë§Œ êµ¬ë… â†’ Sidebarë§Œ ë¦¬ë Œë”ë§
  - Header, UserProfile ì˜í–¥ ì—†ìŒ
end note

@enduml

' ============================================================
' 3. ë¦¬íŒ©í† ë§ ì „í›„ ë¹„êµ
' ============================================================

@startuml refactoring-comparison
!theme plain
skinparam backgroundColor white

skinparam package {
  BackgroundColor #FAFAFA
  BorderColor Black
  BorderThickness 2
}

skinparam component {
  BackgroundColor<<before>> #FFCCCC
  BackgroundColor<<after>> #CCFFCC
  BorderColor Black
}

' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
' Before: í˜¼ì¬ëœ ìƒíƒœ ê´€ë¦¬ (ë³µì¡)
' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
package "Before: ë³µì¡í•œ í˜¼í•© íŒ¨í„´" as Before {
  component "DashboardPage\n(useState)" as BeforeDashboard <<before>>
  component "Header\n(Props)" as BeforeHeader <<before>>
  component "UserProfile\n(Props ë¬´ì‹œ + Zustand)" as BeforeProfile <<before>>
  component "Sidebar\n(Props + Context)" as BeforeSidebar <<before>>
  component "AnalyticsSection\n(Props + Context + Zustand)" as BeforeAnalytics <<before>>

  BeforeDashboard -[#FF0000]-> BeforeHeader : âŒ Props\nuser, isLoading
  BeforeHeader -[#FF0000]-> BeforeProfile : âŒ Props\nuser (ì‚¬ìš© ì•ˆ í•¨)
  BeforeDashboard -[#FF0000]-> BeforeSidebar : âŒ Props\nfilters
  BeforeDashboard -[#FF0000]-> BeforeAnalytics : âŒ Props\nfilters, selectedTab

  note bottom of Before
    **ë¬¸ì œì **:
    âŒ 3ê°€ì§€ ìƒíƒœ ê´€ë¦¬ ë°©ì‹ í˜¼ì¬
    âŒ ë¶ˆí•„ìš”í•œ Props Drilling
    âŒ ë°ì´í„° ë¶ˆì¼ì¹˜ ê°€ëŠ¥ì„±
    âŒ ë¦¬ë Œë”ë§ ìµœì í™” ì–´ë ¤ì›€
    âŒ í…ŒìŠ¤íŠ¸ ë³µì¡ë„ ë†’ìŒ
  end note
}

' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
' After: í†µì¼ëœ ìƒíƒœ ê´€ë¦¬ (ë‹¨ìˆœ)
' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
package "After: Zustand ì¤‘ì‹¬ í†µì¼" as After {
  component "DashboardPage\n(Layoutë§Œ)" as AfterDashboard <<after>>
  component "Header\n(Props ì—†ìŒ)" as AfterHeader <<after>>
  component "UserProfile\n(Zustand)" as AfterProfile <<after>>
  component "Sidebar\n(Zustand)" as AfterSidebar <<after>>
  component "AnalyticsSection\n(Zustand)" as AfterAnalytics <<after>>

  class "Zustand Stores" as Stores <<zustand>> {
    **useAuthStore**
    - user, login, logout
    ====
    **useUIStore**
    - theme, filters, selectedTab
    ====
    **useTodoStore**
    - todos, addTodo
  }

  AfterDashboard --> AfterHeader : children only
  AfterHeader --> AfterProfile : children only
  AfterDashboard --> AfterSidebar : children only
  AfterDashboard --> AfterAnalytics : children only

  Stores .[#00AA00].> AfterProfile : useAuthStore
  Stores .[#00AA00].> AfterSidebar : useUIStore
  Stores .[#00AA00].> AfterAnalytics : useUIStore\n+ useTodoStore

  note bottom of After
    **ê°œì„ ì‚¬í•­**:
    âœ… ë‹¨ì¼ ìƒíƒœ ê´€ë¦¬ íŒ¨í„´ (Zustand)
    âœ… Props Drilling ì™„ì „ ì œê±°
    âœ… ë‹¨ì¼ ì§„ì‹¤ ê³µê¸‰ì› (Single Source of Truth)
    âœ… Selectorë¡œ ë¦¬ë Œë”ë§ ìµœì í™”
    âœ… í…ŒìŠ¤íŠ¸ ìš©ì´ (Store mocking)
  end note
}

' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
' ë¹„êµ í™”ì‚´í‘œ
' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Before -[#0000FF,thickness=3]-> After : **ë¦¬íŒ©í† ë§**

note as RefactoringSteps
  **ë¦¬íŒ©í† ë§ ë‹¨ê³„**

  **Step 1**: useState â†’ Zustand Store ì´ë™
  ```tsx
  // Before
  const [user, setUser] = useState<User | null>(null)
  const [filters, setFilters] = useState<FilterConfig>({})

  // After
  // DashboardPageì—ì„œ ìƒíƒœ ì œê±°
  // useAuthStore, useUIStoreì— ì´ë™
  ```

  **Step 2**: Props Drilling ì œê±°
  ```tsx
  // Before
  <Header user={user} isLoading={isLoading} />
  <Sidebar filters={filters} />

  // After
  <Header />
  <Sidebar />
  // ê° ì»´í¬ë„ŒíŠ¸ê°€ ì§ì ‘ Store êµ¬ë…
  ```

  **Step 3**: Context â†’ Zustand í†µí•© (ì„ íƒ)
  ```tsx
  // Before
  const { theme, toggleTheme } = useContext(ThemeContext)

  // After
  const theme = useUIStore(state => state.theme)
  const toggleTheme = useUIStore(state => state.toggleTheme)
  ```

  **Step 4**: ì¡°ê±´ë¶€ ë Œë”ë§ â†’ ë¼ìš°íŒ…
  ```tsx
  // Before
  {selectedTab === 'todos' ? <TodoSection /> : <Analytics />}

  // After
  // Next.js App Router ì‚¬ìš©
  // /dashboard/todos
  // /dashboard/analytics
  ```

  **ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ**:
  1. í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¶€í„° ì ì§„ì  ë³€ê²½
  2. ê° Storeë³„ë¡œ ë‹¨ê³„ì  ë§ˆì´ê·¸ë ˆì´ì…˜
  3. Props ìœ ì§€í•˜ë©´ì„œ Store ì¶”ê°€ (ê³¼ë„ê¸°)
  4. Props ì™„ì „ ì œê±° (ìµœì¢…)
end note

@enduml

' ============================================================
' 4. ì‹¤ì „ ì˜ˆì œ: E-commerce Product Page
' ============================================================

@startuml real-world-product-page
!theme plain
skinparam backgroundColor white

skinparam component {
  BackgroundColor<<page>> #E8E8E8
  BackgroundColor<<props>> #D4E6F1
  BackgroundColor<<context>> #D5F4E6
  BackgroundColor<<zustand>> #FCE4D6
  BackgroundColor<<mixed>> #F9E79F
  BackgroundColor<<api>> #E6E6FA
  BorderColor Black
}

' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
' ì‹¤ì œ E-commerce ìƒí’ˆ í˜ì´ì§€ êµ¬ì¡°
' â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
package "Product Detail Page" {
  [ProductPage] <<page>>

  package "Product Info" {
    [ProductImages\n(Props + useState)] <<props>>
    [ProductTitle\n(Props)] <<props>>
    [ProductPrice\n(Props + Zustand)] <<mixed>>
    [ProductDescription\n(Props)] <<props>>
  }

  package "Purchase Section" {
    [QuantitySelector\n(useState local)] <<props>>
    [AddToCartButton\n(Zustand)] <<zustand>>
    [BuyNowButton\n(Zustand + Router)] <<mixed>>
  }

  package "Additional Info" {
    [ReviewSection\n(API fetch + useState)] <<api>>
    [RelatedProducts\n(API fetch + Zustand cache)] <<mixed>>
    [RecentlyViewed\n(Zustand persist)] << zustand>>
  }

  [Breadcrumb\n(Context)] <<context>>
}

' ìƒíƒœ ì†ŒìŠ¤ë“¤
class "useState\n(ProductPage)" as PageState <<useState>> {
  - product: Product
  - quantity: number
  - selectedVariant: string
  - isInWishlist: boolean
}

class CartContext <<context>> {
  - items: CartItem[]
  + addToCart()
  + updateQuantity()
}

class useCartStore <<zustand>> {
  - items: CartItem[]
  + addItem()
  + removeItem()
  + totalPrice()
}

class useAuthStore <<zustand>> {
  - user: User | null
  - isAuthenticated
}

class "API Cache\n(React Query or SWR)" as APICache <<api>> {
  - /api/products/:id
  - /api/reviews
  - /api/related
}

' ê´€ê³„ë“¤
ProductPage --> ProductImages
ProductPage --> ProductTitle
ProductPage --> ProductPrice
ProductPage --> QuantitySelector

PageState -[#4A90E2]-> ProductPage
PageState -[#4A90E2,dashed]-> ProductImages : props
PageState -[#4A90E2,dashed]-> ProductTitle : props
PageState -[#4A90E2,dashed]-> ProductPrice : props
PageState -[#4A90E2,dashed]-> QuantitySelector : props

useCartStore .[#E89A3C].> AddToCartButton
useCartStore .[#E89A3C].> ProductPrice : ì¥ë°”êµ¬ë‹ˆ ì•„ì´í…œ ìˆ˜
useCartStore .[#E89A3C].> RecentlyViewed

useAuthStore .[#E89A3C].> BuyNowButton

APICache .[#E6E6FA].> ReviewSection
APICache .[#E6E6FA].> RelatedProducts

CartContext .[#50C878].> Breadcrumb

note top of ProductPage
  **ProductPage** (ì‹¤ì œ í”„ë¡œë•ì…˜ ì½”ë“œ)

  ```tsx
  'use client'
  import { useState, useEffect } from 'react'
  import { useParams } from 'next/navigation'

  export default function ProductPage() {
    // â¶ URL íŒŒë¼ë¯¸í„°
    const params = useParams()
    const productId = params.id as string

    // â· useStateë¡œ í˜ì´ì§€ ìƒíƒœ ê´€ë¦¬
    const [product, setProduct] = useState<Product | null>(null)
    const [quantity, setQuantity] = useState(1)
    const [selectedVariant, setSelectedVariant] = useState('')
    const [isInWishlist, setIsInWishlist] = useState(false)

    // â¸ API í˜¸ì¶œ (useEffect)
    useEffect(() => {
      fetch(`/api/products/${productId}`)
        .then(res => res.json())
        .then(setProduct)
    }, [productId])

    if (!product) return <Loading />

    return (
      <div>
        <Breadcrumb /> {/* Context */}

        <ProductImages
          images={product.images}
          selectedVariant={selectedVariant}
        />

        <ProductTitle title={product.title} />

        <ProductPrice
          price={product.price}
          discount={product.discount}
        />

        <ProductDescription
          description={product.description}
        />

        <QuantitySelector
          quantity={quantity}
          onChange={setQuantity}
        />

        <AddToCartButton
          productId={product.id}
          quantity={quantity}
        />

        <ReviewSection productId={product.id} />

        <RelatedProducts categoryId={product.categoryId} />

        <RecentlyViewed />
      </div>
    )
  }
  ```

  **5ê°€ì§€ ìƒíƒœ ê´€ë¦¬ í˜¼ì¬**:
  1. useState: product, quantity, selectedVariant
  2. Props Drilling: ìì‹ë“¤ì—ê²Œ ì „ë‹¬
  3. Context: Breadcrumb (ì „ì—­ ë„¤ë¹„ê²Œì´ì…˜)
  4. Zustand: Cart, Auth, RecentlyViewed
  5. API Cache: ReviewSection, RelatedProducts
end note

note bottom of ProductPrice
  **ProductPrice** (í˜¼í•© íŒ¨í„´)

  ```tsx
  import { useCartStore } from '@/stores/cart'

  type Props = {
    price: number      // Props Drilling
    discount?: number  // Props Drilling
  }

  export const ProductPrice = ({ price, discount }: Props) => {
    // â¶ Propsë¡œ ë°›ì€ ê°€ê²©
    const finalPrice = discount
      ? price * (1 - discount / 100)
      : price

    // â· Zustandì—ì„œ ì¥ë°”êµ¬ë‹ˆ ì•„ì´í…œ ìˆ˜
    const cartItemCount = useCartStore(
      state => state.items.length
    )

    return (
      <div>
        <span className="original-price">
          ${price}
        </span>
        {discount && (
          <span className="discount">
            {discount}% OFF
          </span>
        )}
        <span className="final-price">
          ${finalPrice}
        </span>

        {/* Zustand ìƒíƒœ í‘œì‹œ */}
        <span className="cart-badge">
          Cart: {cartItemCount}
        </span>
      </div>
    )
  }
  ```

  **2ê°€ì§€ ì†ŒìŠ¤**:
  - Props: price, discount (ë¶€ëª¨ì—ì„œ)
  - Zustand: cartItemCount (ì „ì—­)

  **ì™œ í˜¼í•©?**:
  - priceëŠ” ìƒí’ˆë§ˆë‹¤ ë‹¤ë¦„ (Props ì í•©)
  - cartItemCountëŠ” ì „ì—­ ìƒíƒœ (Zustand ì í•©)
end note

note right of AddToCartButton
  **AddToCartButton** (Zustandë§Œ)

  ```tsx
  import { useCartStore } from '@/stores/cart'
  import { toast } from 'sonner'

  type Props = {
    productId: string
    quantity: number  // Propsë¡œ ë°›ìŒ
  }

  export const AddToCartButton = ({
    productId,
    quantity
  }: Props) => {
    const addItem = useCartStore(
      state => state.addItem
    )

    const handleAddToCart = () => {
      addItem({
        productId,
        quantity
      })

      toast.success('Added to cart!')
    }

    return (
      <button onClick={handleAddToCart}>
        Add to Cart ({quantity})
      </button>
    )
  }
  ```

  **Props + Zustand ì¡°í•©**:
  - quantity: Props (ë¶€ëª¨ ìƒíƒœ)
  - addItem: Zustand (ì „ì—­ ì•¡ì…˜)
  - ì ì ˆí•œ í˜¼í•© ì‚¬ìš© ì¼€ì´ìŠ¤
end note

note left of ReviewSection
  **ReviewSection** (API ìºì‹±)

  ```tsx
  import { useState, useEffect } from 'react'

  type Props = {
    productId: string  // Props Drilling
  }

  export const ReviewSection = ({ productId }: Props) => {
    // â¶ ë¡œì»¬ ìƒíƒœë¡œ API ì‘ë‹µ ê´€ë¦¬
    const [reviews, setReviews] = useState<Review[]>([])
    const [isLoading, setIsLoading] = useState(true)

    // â· useEffectë¡œ API í˜¸ì¶œ
    useEffect(() => {
      setIsLoading(true)
      fetch(`/api/products/${productId}/reviews`)
        .then(res => res.json())
        .then(data => {
          setReviews(data)
          setIsLoading(false)
        })
    }, [productId])

    if (isLoading) return <Skeleton />

    return (
      <div>
        <h3>Reviews ({reviews.length})</h3>
        {reviews.map(review => (
          <ReviewCard key={review.id} review={review} />
        ))}
      </div>
    )
  }
  ```

  **ê°œì„  ë°©ì•ˆ**:
  ```tsx
  // React Query ì‚¬ìš©
  import { useQuery } from '@tanstack/react-query'

  const { data: reviews, isLoading } = useQuery({
    queryKey: ['reviews', productId],
    queryFn: () => fetch(`/api/products/${productId}/reviews`)
      .then(res => res.json())
  })
  ```

  **ì¥ì **:
  - ìë™ ìºì‹±
  - ë°±ê·¸ë¼ìš´ë“œ refetch
  - ë¡œë”©/ì—ëŸ¬ ìƒíƒœ ê´€ë¦¬
end note

legend right
  **ì‹¤ì œ í”„ë¡œë•ì…˜ ìƒíƒœ ê´€ë¦¬ íŒ¨í„´**

  **ì–¸ì œ ì–´ë–¤ íŒ¨í„´ì„ ì‚¬ìš©í• ê¹Œ?**

  **1. useState (ë¡œì»¬ ìƒíƒœ)**
  - í˜ì´ì§€ ì „ìš© ë°ì´í„°
  - ì¼ì‹œì  UI ìƒíƒœ (quantity, selectedVariant)
  - ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì™€ ê³µìœ  ì•ˆ í•¨

  **2. Props Drilling**
  - 1-2 depth ì „ë‹¬ (ê¹Šì§€ ì•Šì„ ë•Œ)
  - ë¶€ëª¨ê°€ ê´€ë¦¬í•´ì•¼ í•  ìƒíƒœ
  - ì¬ì‚¬ìš© ê°€ëŠ¥í•œ Presentational ì»´í¬ë„ŒíŠ¸

  **3. Context API**
  - í…Œë§ˆ, ì–¸ì–´ (ìì£¼ ë³€ê²½ ì•ˆ ë¨)
  - ë ˆê±°ì‹œ ì½”ë“œ (ì´ë¯¸ êµ¬ì¶•ë¨)
  - Provider ë²”ìœ„ ì œí•œ ê°€ëŠ¥

  **4. Zustand**
  - ì „ì—­ ìƒíƒœ (Cart, Auth, UI)
  - ì—¬ëŸ¬ í˜ì´ì§€ì—ì„œ ê³µìœ 
  - localStorage ë™ê¸°í™” í•„ìš”

  **5. API ìºì‹± (React Query/SWR)**
  - ì„œë²„ ë°ì´í„°
  - ìì£¼ refetch í•„ìš”
  - ë‚™ê´€ì  ì—…ë°ì´íŠ¸

  **í˜¼í•© ì‚¬ìš©ì€ OK!**
  - ProductPrice: Props + Zustand
  - AddToCartButton: Props + Zustand
  - ê° íŒ¨í„´ì˜ ì¥ì  í™œìš©

  **ë‹¨, ì¼ê´€ì„± ìœ ì§€**:
  - ê°™ì€ ë°ì´í„°ëŠ” ê°™ì€ ì†ŒìŠ¤ì—ì„œ
  - user: AuthStoreë§Œ (useState ì¤‘ë³µ X)
endlegend

@enduml
