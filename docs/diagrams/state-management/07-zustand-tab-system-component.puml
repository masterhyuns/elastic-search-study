/'
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Zustand Tab System - Component Diagram (ì»´í¬ë„ŒíŠ¸ ë‹¤ì´ì–´ê·¸ë¨)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“‹ ê°œìš”
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Zustand íƒ­ ì‹œìŠ¤í…œì˜ ë¬¼ë¦¬ì  íŒŒì¼ êµ¬ì¡°ì™€ ëª¨ë“ˆ ì˜ì¡´ì„±ì„ í‘œí˜„í•©ë‹ˆë‹¤.
í”„ë¡œì íŠ¸ í´ë” êµ¬ì¡°ë¥¼ ì‹œê°í™”í•˜ì—¬ ì‹ ê·œ ê°œë°œìê°€ ì½”ë“œ ìœ„ì¹˜ë¥¼ ì‰½ê²Œ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ğŸ¯ í´ë” êµ¬ì¡°
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
src/
â”œâ”€â”€ stores/
â”‚   â””â”€â”€ tabStore.ts (Zustand Store)
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ usePageTab.ts (Custom Hook)
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â”œâ”€â”€ MainLayout.tsx
â”‚   â”‚   â””â”€â”€ PageTabLayout.tsx
â”‚   â””â”€â”€ tabs/
â”‚       â”œâ”€â”€ TabHeader.tsx
â”‚       â””â”€â”€ TabContent.tsx
â””â”€â”€ types/
    â””â”€â”€ tab.types.ts (TypeScript Types)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
'/

@startuml zustand-tab-system-component-structure
title Zustand Tab System - í´ë” êµ¬ì¡° (Component)

skinparam component {
  BorderColor Black
  ArrowColor Black
}

top to bottom direction

package "src/" {

  package "stores/" {
    component "tabStore.ts" as TabStore <<zustand>>

    note right of TabStore
      **Zustand Store ì •ì˜**

      import { create } from 'zustand'

      export const useTabStore = create(function(set, get) {
        return {
          tabs: [],
          activeTabKey: null,

          addTab: function(tab) {
            set(function(state) {
              return { tabs: [...state.tabs, tab] }
            })
          },

          removeTab: function(key) {
            set(function(state) {
              return {
                tabs: state.tabs.filter(t -> t.key !== key)
              }
            })
          },

          activeTab: function(key) {
            set({ activeTabKey: key })
          },

          changeParams: function(key, params) {
            set(function(state) {
              return {
                tabs: state.tabs.map(function(tab) {
                  if (tab.key is key) {
                    return { ...tab, params }
                  }
                  return tab
                })
              }
            })
          }
        }
      })
    end note
  }

  package "hooks/" {
    component "usePageTab.ts" as UsePageTab <<custom-hook>>

    note right of UsePageTab
      **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì¸µ**

      import { useTabStore } from '../stores/tabStore'

      export const usePageTab = function() {
        const store <- useTabStore()

        const openTab = function(config) {
          const exists <- store.tabs.find(
            t -> t.key is config.key
          )

          if (exists) {
            store.activeTab(config.key)
          } else {
            const tab = {
              ...config,
              children: <config.component {...config.params} />
            }
            store.addTab(tab)
            store.activeTab(config.key)
          }
        }

        const closeTab = function(key) {
          store.removeTab(key)

          if (store.activeTabKey is key) {
            const remaining <- store.tabs.filter(t -> t.key !== key)
            if (remaining.length > 0) {
              store.activeTab(remaining[0].key)
            }
          }
        }

        return {
          ...store,
          openTab,
          closeTab,
          switchTab: store.activeTab,
          updateTabParams: store.changeParams
        }
      }
    end note
  }

  package "types/" {
    component "tab.types.ts" as TabTypes <<type>>

    note right of TabTypes
      **TypeScript íƒ€ì… ì •ì˜**

      export interface Tab {
        key: string
        title: string
        description: string
        children: React.ReactNode
        params?: TabParams
      }

      export interface TabParams {
        id?: string
        mode?: "view" | "edit"
        filters?: Record<string, any>
        [key: string]: any
      }

      export interface TabConfig {
        key: string
        title: string
        description: string
        component: React.ComponentType
        params?: TabParams
      }
    end note
  }

  package "components/" {
    package "layouts/" {
      component "MainLayout.tsx" as MainLayout <<layout>>
      component "PageTabLayout.tsx" as PageTabLayout <<layout>>
    }

    package "tabs/" {
      component "TabHeader.tsx" as TabHeader <<atom>>
      component "TabContent.tsx" as TabContent <<atom>>
    }
  }

  note right of MainLayout
    **ìµœìƒìœ„ ë ˆì´ì•„ì›ƒ**

    export const MainLayout = function() {
      return (
        <div>
          <Header />
          <PageTabLayout />
          <Footer />
        </div>
      )
    }

    íŒŒì¼ ìœ„ì¹˜: src/components/layouts/MainLayout.tsx
  end note

  note right of PageTabLayout
    **íƒ­ ë Œë”ë§ ì»´í¬ë„ŒíŠ¸**

    export const PageTabLayout = function() {
      const {
        tabs,
        activeTabKey,
        closeTab,
        switchTab
      } <- usePageTab()

      return (
        <div>
          <TabHeaderList>
            {tabs.map(tab ->
              <TabHeader
                tab={tab}
                isActive={tab.key is activeTabKey}
                onSwitch={switchTab}
                onClose={closeTab}
              />
            )}
          </TabHeaderList>

          <TabContent
            tab={tabs.find(t -> t.key is activeTabKey)}
          />
        </div>
      )
    }
  end note
}

' ì˜ì¡´ì„± ê´€ê³„
TabStore --> TabTypes : imports types
UsePageTab --> TabStore : uses store
UsePageTab --> TabTypes : imports types
PageTabLayout --> UsePageTab : uses hook
PageTabLayout --> TabHeader : renders
PageTabLayout --> TabContent : renders
MainLayout --> PageTabLayout : contains

@enduml

@startuml zustand-tab-system-component-full-project
title Zustand Tab System - ì „ì²´ í”„ë¡œì íŠ¸ êµ¬ì¡° (Component)

skinparam component {
  BorderColor Black
  ArrowColor Black
}

left to right direction

package "src/" {

  package "stores/" {
    component "tabStore.ts" as TabStore
  }

  package "hooks/" {
    component "usePageTab.ts" as UsePageTab
  }

  package "types/" {
    component "tab.types.ts" as TabTypes
  }

  package "components/" {
    package "layouts/" {
      component "MainLayout.tsx" as MainLayout
      component "PageTabLayout.tsx" as PageTabLayout
    }

    package "tabs/" {
      component "TabHeader.tsx" as TabHeader
      component "TabContent.tsx" as TabContent
      component "CloseButton.tsx" as CloseButton
    }

    package "pages/" {
      component "UserDetail.tsx" as UserDetail
      component "ProductList.tsx" as ProductList
      component "OrderForm.tsx" as OrderForm
    }
  }

  package "utils/" {
    component "tabKeyGenerator.ts" as KeyGen
  }
}

' ì˜ì¡´ì„±
TabStore --> TabTypes
UsePageTab --> TabStore
UsePageTab --> TabTypes
UsePageTab --> KeyGen

MainLayout --> PageTabLayout
PageTabLayout --> UsePageTab
PageTabLayout --> TabHeader
PageTabLayout --> TabContent

TabHeader --> CloseButton
TabContent ..> UserDetail : renders
TabContent ..> ProductList : renders
TabContent ..> OrderForm : renders

note right of KeyGen
  **íƒ­ Key ìƒì„± ìœ í‹¸**

  export const generateTabKey = function(type, id) {
    return type + "-" + id
  }

  ì˜ˆ:
  generateTabKey("user-detail", "123")
  â†’ "user-detail-123"
end note

note bottom of TabStore
  **State ê³„ì¸µ**
  - ìˆœìˆ˜í•œ ìƒíƒœ ê´€ë¦¬
  - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì—†ìŒ
end note

note bottom of UsePageTab
  **Hook ê³„ì¸µ**
  - Store ë˜í•‘
  - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
end note

note bottom of PageTabLayout
  **Component ê³„ì¸µ**
  - UI ë Œë”ë§ë§Œ
  - Hook í†µí•´ì„œë§Œ ì ‘ê·¼
end note

@enduml

@startuml zustand-tab-system-component-dependency
title Zustand Tab System - ì˜ì¡´ì„± ê·¸ë˜í”„ (Component)

skinparam component {
  BorderColor Black
  ArrowColor Black
}

component "tabStore.ts" as Store <<store>>
component "tab.types.ts" as Types <<type>>
component "usePageTab.ts" as Hook <<hook>>
component "PageTabLayout.tsx" as Layout <<component>>
component "TabHeader.tsx" as Header <<component>>
component "TabContent.tsx" as Content <<component>>
component "UserDetail.tsx" as Page <<page>>

Store --> Types : imports
Hook --> Store : uses
Hook --> Types : imports
Layout --> Hook : uses
Layout --> Header : renders
Layout --> Content : renders
Content ..> Page : renders dynamically

note right of Store
  **Level 1: Store**
  - ì˜ì¡´ì„± ì—†ìŒ (typesë§Œ import)
  - ê°€ì¥ í•˜ìœ„ ë ˆë²¨
end note

note right of Hook
  **Level 2: Hook**
  - Storeì—ë§Œ ì˜ì¡´
  - ComponentëŠ” ëª¨ë¦„
end note

note right of Layout
  **Level 3: Component**
  - Hookì—ë§Œ ì˜ì¡´
  - Store ì§ì ‘ import ê¸ˆì§€
end note

note right of Page
  **Level 4: Page**
  - íƒ­ ì»¨í…ì¸ 
  - ë…ë¦½ì ìœ¼ë¡œ ë™ì‘
  - íƒ­ ì‹œìŠ¤í…œê³¼ ë¬´ê´€
end note

@enduml

@startuml zustand-tab-system-component-imports
title Zustand Tab System - Import ê´€ê³„ (Component)

skinparam component {
  BorderColor Black
  ArrowColor Black
}

top to bottom direction

frame "tabStore.ts" as StoreFile {
  component "useTabStore" as Store <<export>>
}

frame "tab.types.ts" as TypesFile {
  component "Tab" as TabType <<export>>
  component "TabConfig" as ConfigType <<export>>
}

frame "usePageTab.ts" as HookFile {
  component "usePageTab" as Hook <<export>>
}

frame "PageTabLayout.tsx" as LayoutFile {
  component "PageTabLayout" as Layout <<export>>
}

StoreFile --> TypesFile : import { Tab }
HookFile --> StoreFile : import { useTabStore }
HookFile --> TypesFile : import { Tab, TabConfig }
LayoutFile --> HookFile : import { usePageTab }

note right of HookFile
  **Import ì˜ˆì‹œ**

  import { useTabStore } from '../stores/tabStore'
  import type { Tab, TabConfig } from '../types/tab.types'

  export const usePageTab = function() {
    const store <- useTabStore()
    // ...
  }
end note

note right of LayoutFile
  **Import ì˜ˆì‹œ**

  import { usePageTab } from '../../hooks/usePageTab'

  export const PageTabLayout = function() {
    const { tabs, activeTabKey } <- usePageTab()
    // ...
  }

  ì£¼ì˜:
  - useTabStoreëŠ” ì§ì ‘ importí•˜ì§€ ì•ŠìŒ
  - usePageTabë§Œ ì‚¬ìš©
end note

@enduml

/'
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“š Component Diagram ì‚¬ìš© ê°€ì´ë“œ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## í´ë” êµ¬ì¡° ê¶Œì¥ì‚¬í•­

src/
â”œâ”€â”€ stores/
â”‚   â””â”€â”€ tabStore.ts              # Zustand Store
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ usePageTab.ts            # Custom Hook
â”œâ”€â”€ types/
â”‚   â””â”€â”€ tab.types.ts             # TypeScript Types
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â”œâ”€â”€ MainLayout.tsx       # ìµœìƒìœ„ ë ˆì´ì•„ì›ƒ
â”‚   â”‚   â””â”€â”€ PageTabLayout.tsx    # íƒ­ ë Œë”ë§
â”‚   â”œâ”€â”€ tabs/
â”‚   â”‚   â”œâ”€â”€ TabHeader.tsx        # ê°œë³„ íƒ­ í—¤ë”
â”‚   â”‚   â”œâ”€â”€ TabContent.tsx       # íƒ­ ì»¨í…ì¸  ì˜ì—­
â”‚   â”‚   â””â”€â”€ CloseButton.tsx      # ë‹«ê¸° ë²„íŠ¼
â”‚   â””â”€â”€ pages/
â”‚       â”œâ”€â”€ UserDetail.tsx       # íƒ­ì—ì„œ ë Œë”ë§ë  í˜ì´ì§€
â”‚       â”œâ”€â”€ ProductList.tsx
â”‚       â””â”€â”€ OrderForm.tsx
â””â”€â”€ utils/
    â””â”€â”€ tabKeyGenerator.ts       # ìœ í‹¸ë¦¬í‹°

## ì˜ì¡´ì„± ê·œì¹™

ê³„ì¸µë³„ import ê·œì¹™:

Level 1 (Store):
  - import ê°€ëŠ¥: typesë§Œ
  - import ë¶ˆê°€: ë‹¤ë¥¸ ëª¨ë“  ê²ƒ

Level 2 (Hook):
  - import ê°€ëŠ¥: stores, types
  - import ë¶ˆê°€: components

Level 3 (Component):
  - import ê°€ëŠ¥: hooks, types
  - import ë¶ˆê°€: stores (ì§ì ‘ ì ‘ê·¼ ê¸ˆì§€)

Level 4 (Page):
  - import ê°€ëŠ¥: ììœ ë¡­ê²Œ
  - ë‹¨, íƒ­ ì‹œìŠ¤í…œê³¼ ë¬´ê´€í•˜ê²Œ ë™ì‘

ì—­ë°©í–¥ ì˜ì¡´ ê¸ˆì§€:
  - Store â†’ Hook (X)
  - Hook â†’ Component (X)
  - Component â†’ Page (ë Œë”ë§ë§Œ í—ˆìš©)

## íŒŒì¼ ë°°ì¹˜ ì „ëµ

1. stores/
   - Zustand Storeë§Œ ë°°ì¹˜
   - í•˜ë‚˜ì˜ íŒŒì¼ì— í•˜ë‚˜ì˜ Store
   - tabStore.ts, userStore.ts (ë¶„ë¦¬)

2. hooks/
   - Custom Hookë§Œ ë°°ì¹˜
   - usePageTab, useTabHistory, useTabPersistence

3. types/
   - ê³µí†µ íƒ€ì… ì •ì˜
   - tab.types.ts, user.types.ts

4. components/
   - layouts/: ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
   - tabs/: íƒ­ ê´€ë ¨ ì›ìì  ì»´í¬ë„ŒíŠ¸
   - pages/: íƒ­ ì»¨í…ì¸  í˜ì´ì§€

## Import Path ê·œì¹™

ì ˆëŒ€ ê²½ë¡œ ì‚¬ìš© (ì¶”ì²œ):
  import { useTabStore } from '@/stores/tabStore'
  import { usePageTab } from '@/hooks/usePageTab'

ìƒëŒ€ ê²½ë¡œ ì‚¬ìš© (ë¹„ì¶”ì²œ):
  import { useTabStore } from '../../../stores/tabStore'

tsconfig.json ì„¤ì •:
  {
    "compilerOptions": {
      "baseUrl": ".",
      "paths": {
        "@/*": ["src/*"]
      }
    }
  }

## ì½”ë“œ ë¶„ë¦¬ ì „ëµ

tabStore.ts (ìˆœìˆ˜ ìƒíƒœ ê´€ë¦¬):
  - tabs ë°°ì—´ CRUD
  - activeTabKey ê´€ë¦¬
  - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì—†ìŒ

usePageTab.ts (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§):
  - ì¤‘ë³µ íƒ­ ì²´í¬
  - ìë™ í™œì„±í™”
  - íƒ­ í‚¤ ìƒì„±
  - íŒŒë¼ë¯¸í„° ê²€ì¦

PageTabLayout.tsx (UI ë Œë”ë§):
  - íƒ­ í—¤ë” ë Œë”ë§
  - íƒ­ ì»¨í…ì¸  ë Œë”ë§
  - ìŠ¤íƒ€ì¼ë§
  - Store ëª¨ë¦„ (Hookë§Œ ì‚¬ìš©)

ì¥ì :
  - ê° íŒŒì¼ì˜ ì±…ì„ì´ ëª…í™•
  - í…ŒìŠ¤íŠ¸ ìš©ì´
  - ì¬ì‚¬ìš© ê°€ëŠ¥

## í…ŒìŠ¤íŠ¸ ì „ëµ

Store í…ŒìŠ¤íŠ¸:
  // stores/__tests__/tabStore.test.ts
  import { useTabStore } from '../tabStore'

  test('addTab should add new tab', function() {
    const { addTab, tabs } <- useTabStore.getState()
    addTab({ key: 'test', title: 'Test' })
    expect(tabs.length).toBe(1)
  })

Hook í…ŒìŠ¤íŠ¸:
  // hooks/__tests__/usePageTab.test.ts
  import { renderHook } from '@testing-library/react-hooks'
  import { usePageTab } from '../usePageTab'

  test('openTab should not create duplicate', function() {
    const { result } <- renderHook(function() { return usePageTab() })
    result.current.openTab({ key: 'test', title: 'Test' })
    result.current.openTab({ key: 'test', title: 'Test' })
    expect(result.current.tabs.length).toBe(1)
  })

Component í…ŒìŠ¤íŠ¸:
  // components/__tests__/PageTabLayout.test.tsx
  import { render } from '@testing-library/react'
  import { PageTabLayout } from '../PageTabLayout'

  test('should render tabs', function() {
    const { getByText } <- render(<PageTabLayout />)
    // ...
  })

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
'/
