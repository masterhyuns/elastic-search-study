# Remix ì¹˜íŠ¸ ì‹œíŠ¸ ğŸ“‹

ë¹ ë¥¸ ì°¸ì¡°ë¥¼ ìœ„í•œ Remix í•µì‹¬ íŒ¨í„´ ëª¨ìŒì…ë‹ˆë‹¤.

---

## ğŸ“ í”„ë¡œì íŠ¸ ì„¤ì •

### ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±
```bash
pnpm create remix@latest my-app
cd my-app
pnpm install
pnpm run dev
```

### í”„ë¡œì íŠ¸ êµ¬ì¡°
```
app/
â”œâ”€â”€ routes/              # ë¼ìš°íŠ¸ íŒŒì¼
â”œâ”€â”€ components/          # ì¬ì‚¬ìš© ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ utils/              # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”œâ”€â”€ root.tsx            # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â””â”€â”€ entry.client.tsx    # í´ë¼ì´ì–¸íŠ¸ ì§„ì…ì 
```

---

## ğŸ›£ï¸ ë¼ìš°íŒ…

### íŒŒì¼ëª… ê·œì¹™
```
app/routes/
_index.tsx              â†’ /
about.tsx               â†’ /about
blog._index.tsx         â†’ /blog
blog.$slug.tsx          â†’ /blog/:slug
blog.($lang).tsx        â†’ /blog ë˜ëŠ” /blog/:lang
blog.$.tsx              â†’ /blog/* (ìºì¹˜ì˜¬)
_auth.login.tsx         â†’ /login (ë ˆì´ì•„ì›ƒë§Œ)
```

### ê¸°ë³¸ ë¼ìš°íŠ¸
```typescript
// app/routes/posts._index.tsx
export default function Posts() {
  return <h1>í¬ìŠ¤íŠ¸ ëª©ë¡</h1>;
}
```

### ë™ì  ë¼ìš°íŠ¸
```typescript
// app/routes/posts.$postId.tsx
import { useParams } from "@remix-run/react";

export default function Post() {
  const { postId } = useParams();
  return <h1>í¬ìŠ¤íŠ¸ {postId}</h1>;
}
```

### ì¤‘ì²© ë¼ìš°íŠ¸
```typescript
// app/routes/dashboard.tsx (ë¶€ëª¨)
import { Outlet } from "@remix-run/react";

export default function Dashboard() {
  return (
    <div>
      <nav>ì‚¬ì´ë“œë°”</nav>
      <Outlet /> {/* ìì‹ ë¼ìš°íŠ¸ */}
    </div>
  );
}

// app/routes/dashboard.settings.tsx (ìì‹)
export default function Settings() {
  return <h1>ì„¤ì •</h1>;
}
```

---

## ğŸ“Š ë°ì´í„° ë¡œë”©

### Loader (GET)
```typescript
import { json, LoaderFunctionArgs } from "@remix-run/node";
import { useLoaderData } from "@remix-run/react";

export const loader = async ({ params, request }: LoaderFunctionArgs) => {
  // URL íŒŒë¼ë¯¸í„°
  const id = params.postId;

  // ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°
  const url = new URL(request.url);
  const page = url.searchParams.get("page") || "1";

  // ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
  const data = await fetchData(id, page);

  // JSON ì‘ë‹µ
  return json({ data });
};

export default function MyRoute() {
  const { data } = useLoaderData<typeof loader>();
  return <div>{data}</div>;
}
```

### Loader ì—ëŸ¬ ì²˜ë¦¬
```typescript
export const loader = async ({ params }: LoaderFunctionArgs) => {
  const post = await db.post.findUnique({
    where: { id: params.postId }
  });

  if (!post) {
    throw new Response("Not Found", { status: 404 });
  }

  return json({ post });
};
```

### Loader ë¦¬ë‹¤ì´ë ‰íŠ¸
```typescript
export const loader = async ({ request }: LoaderFunctionArgs) => {
  const user = await getUser(request);

  if (!user) {
    return redirect("/login");
  }

  return json({ user });
};
```

---

## âœï¸ ë°ì´í„° ë³€ê²½

### Action (POST/PUT/DELETE)
```typescript
import { redirect, ActionFunctionArgs } from "@remix-run/node";

export const action = async ({ request }: ActionFunctionArgs) => {
  const formData = await request.formData();

  const title = formData.get("title");
  const content = formData.get("content");

  await db.post.create({
    data: { title, content }
  });

  return redirect("/posts");
};
```

### HTTP ë©”ì†Œë“œë³„ ì²˜ë¦¬
```typescript
export const action = async ({ request }: ActionFunctionArgs) => {
  const formData = await request.formData();

  switch (request.method) {
    case "POST":
      return await createPost(formData);
    case "PUT":
      return await updatePost(formData);
    case "DELETE":
      return await deletePost(formData);
    default:
      throw new Response("Method not allowed", { status: 405 });
  }
};
```

### Intent íŒ¨í„´
```typescript
export const action = async ({ request }: ActionFunctionArgs) => {
  const formData = await request.formData();
  const intent = formData.get("intent");

  switch (intent) {
    case "create":
      return await createItem(formData);
    case "update":
      return await updateItem(formData);
    case "delete":
      return await deleteItem(formData);
  }
};

// ì‚¬ìš©
<button name="intent" value="create">ìƒì„±</button>
<button name="intent" value="delete">ì‚­ì œ</button>
```

---

## ğŸ“ Form

### ê¸°ë³¸ Form
```typescript
import { Form } from "@remix-run/react";

<Form method="post">
  <input name="title" />
  <button type="submit">ì €ì¥</button>
</Form>
```

### GET Form (ê²€ìƒ‰)
```typescript
<Form method="get">
  <input name="search" />
  <button type="submit">ê²€ìƒ‰</button>
</Form>
```

### ì—ëŸ¬ í‘œì‹œ
```typescript
import { useActionData } from "@remix-run/react";

export default function MyForm() {
  const actionData = useActionData<typeof action>();

  return (
    <Form method="post">
      <input name="email" />
      {actionData?.errors?.email && (
        <p className="error">{actionData.errors.email}</p>
      )}
      <button type="submit">ì œì¶œ</button>
    </Form>
  );
}
```

---

## ğŸ”„ useFetcher

### ê¸°ë³¸ ì‚¬ìš©ë²•
```typescript
import { useFetcher } from "@remix-run/react";

export default function MyComponent() {
  const fetcher = useFetcher();

  return (
    <fetcher.Form method="post" action="/api/subscribe">
      <input name="email" />
      <button type="submit">
        {fetcher.state === "submitting" ? "ì œì¶œ ì¤‘..." : "êµ¬ë…"}
      </button>
    </fetcher.Form>
  );
}
```

### í”„ë¡œê·¸ë˜ë° ë°©ì‹ ì œì¶œ
```typescript
const fetcher = useFetcher();

const handleClick = () => {
  const formData = new FormData();
  formData.append("item", "value");

  fetcher.submit(formData, {
    method: "post",
    action: "/api/action"
  });
};
```

### Loader ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
```typescript
const fetcher = useFetcher();

useEffect(() => {
  fetcher.load("/api/data");
}, []);

return fetcher.data ? <div>{fetcher.data}</div> : <div>ë¡œë”©...</div>;
```

---

## ğŸš¦ Navigation

### Link
```typescript
import { Link } from "@remix-run/react";

<Link to="/about">About</Link>
<Link to="/posts/123" prefetch="intent">Post</Link>
```

### NavLink (í™œì„± ìƒíƒœ)
```typescript
import { NavLink } from "@remix-run/react";

<NavLink
  to="/dashboard"
  className={({ isActive }) => isActive ? "active" : ""}
>
  Dashboard
</NavLink>
```

### useNavigate
```typescript
import { useNavigate } from "@remix-run/react";

const navigate = useNavigate();

const handleClick = () => {
  navigate("/success");
};
```

---

## âš ï¸ ì—ëŸ¬ ì²˜ë¦¬

### ErrorBoundary
```typescript
import { useRouteError, isRouteErrorResponse } from "@remix-run/react";

export function ErrorBoundary() {
  const error = useRouteError();

  if (isRouteErrorResponse(error)) {
    return (
      <div>
        <h1>{error.status} {error.statusText}</h1>
        <p>{error.data}</p>
      </div>
    );
  }

  return <div>ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ë°œìƒ</div>;
}
```

---

## ğŸ·ï¸ ë©”íƒ€ë°ì´í„°

### Meta í•¨ìˆ˜
```typescript
import { MetaFunction } from "@remix-run/node";

export const meta: MetaFunction = () => {
  return [
    { title: "í˜ì´ì§€ ì œëª©" },
    { name: "description", content: "í˜ì´ì§€ ì„¤ëª…" },
    { property: "og:title", content: "ì†Œì…œ ë¯¸ë””ì–´ ì œëª©" }
  ];
};
```

### ë™ì  Meta
```typescript
export const meta: MetaFunction<typeof loader> = ({ data }) => {
  return [
    { title: data.post.title },
    { name: "description", content: data.post.excerpt }
  ];
};
```

---

## ğŸ”— Links

### Links í•¨ìˆ˜
```typescript
import { LinksFunction } from "@remix-run/node";
import styles from "~/styles/app.css";

export const links: LinksFunction = () => {
  return [
    { rel: "stylesheet", href: styles },
    { rel: "icon", href: "/favicon.ico" }
  ];
};
```

---

## ğŸª ì„¸ì…˜ ê´€ë¦¬

### ì„¸ì…˜ ìƒì„±
```typescript
import { createCookieSessionStorage } from "@remix-run/node";

const { getSession, commitSession, destroySession } =
  createCookieSessionStorage({
    cookie: {
      name: "session",
      secure: process.env.NODE_ENV === "production",
      secrets: [process.env.SESSION_SECRET],
      sameSite: "lax",
      path: "/",
      maxAge: 60 * 60 * 24 * 30, // 30ì¼
      httpOnly: true
    }
  });
```

### ì„¸ì…˜ ì½ê¸°/ì“°ê¸°
```typescript
// ì½ê¸°
const session = await getSession(request.headers.get("Cookie"));
const userId = session.get("userId");

// ì“°ê¸°
session.set("userId", "123");
return redirect("/dashboard", {
  headers: {
    "Set-Cookie": await commitSession(session)
  }
});

// ì‚­ì œ
return redirect("/", {
  headers: {
    "Set-Cookie": await destroySession(session)
  }
});
```

---

## ğŸ¨ ìŠ¤íƒ€ì¼ë§

### CSS íŒŒì¼ ì„í¬íŠ¸
```typescript
import { LinksFunction } from "@remix-run/node";
import styles from "./styles.css";

export const links: LinksFunction = () => [
  { rel: "stylesheet", href: styles }
];
```

### Tailwind CSS
```typescript
// remix.config.js
module.exports = {
  tailwind: true,
};

// app/root.tsx
import styles from "./tailwind.css";

export const links: LinksFunction = () => [
  { rel: "stylesheet", href: styles }
];
```

---

## ğŸ“¦ í™˜ê²½ ë³€ìˆ˜

### ì„œë²„ ì „ìš©
```typescript
// .env
DATABASE_URL=postgresql://...
SESSION_SECRET=abc123

// ì„œë²„ì—ì„œ ì‚¬ìš©
const dbUrl = process.env.DATABASE_URL;
```

### í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‚¬ìš©
```typescript
// remix.config.js
module.exports = {
  serverBuildTarget: "vercel",
  server: process.env.NODE_ENV === "development" ? undefined : "./server.js",
  ignoredRouteFiles: ["**/.*"],
  appDirectory: "app",
  assetsBuildDirectory: "public/build",
  serverBuildPath: "api/index.js",
  publicPath: "/build/",
  future: {
    v2_routeConvention: true,
  },
  serverDependenciesToBundle: [
    /^remix-utils.*/,
  ],
};

// í™˜ê²½ë³€ìˆ˜ ì‚¬ìš©
const apiKey = process.env.PUBLIC_API_KEY;
```

---

## ğŸš€ ì„±ëŠ¥ ìµœì í™”

### ìºì‹± í—¤ë”
```typescript
export const headers = () => ({
  "Cache-Control": "public, max-age=300, s-maxage=3600"
});
```

### Prefetch
```typescript
<Link to="/slow-page" prefetch="intent">
  ëŠë¦° í˜ì´ì§€
</Link>
```

### Deferred Data
```typescript
import { defer } from "@remix-run/node";
import { Await, useLoaderData } from "@remix-run/react";
import { Suspense } from "react";

export const loader = async () => {
  return defer({
    fast: await getFastData(),
    slow: getSlowData() // await ì—†ìŒ
  });
};

export default function Page() {
  const { fast, slow } = useLoaderData<typeof loader>();

  return (
    <div>
      <div>{fast}</div>

      <Suspense fallback={<div>ë¡œë”©...</div>}>
        <Await resolve={slow}>
          {(data) => <div>{data}</div>}
        </Await>
      </Suspense>
    </div>
  );
}
```

---

## ğŸ”’ ì¸ì¦

### ì‚¬ìš©ì í™•ì¸
```typescript
export const loader = async ({ request }: LoaderFunctionArgs) => {
  const userId = await getUserId(request);

  if (!userId) {
    throw redirect("/login");
  }

  return json({ user: await getUser(userId) });
};
```

### ë¡œê·¸ì¸
```typescript
export const action = async ({ request }: ActionFunctionArgs) => {
  const formData = await request.formData();
  const email = formData.get("email");
  const password = formData.get("password");

  const user = await login(email, password);

  if (!user) {
    return json({ error: "Invalid credentials" }, { status: 401 });
  }

  return createUserSession(user.id, "/dashboard");
};
```

---

## ğŸ§ª íƒ€ì… ì•ˆì •ì„±

### Loader íƒ€ì…
```typescript
export const loader = async () => {
  return json({ message: "Hello" });
};

export default function MyRoute() {
  // íƒ€ì… ìë™ ì¶”ë¡ 
  const data = useLoaderData<typeof loader>();
  //    ^? { message: string }
}
```

### Zod ìœ íš¨ì„± ê²€ì¦
```typescript
import { z } from "zod";

const Schema = z.object({
  email: z.string().email(),
  password: z.string().min(8)
});

export const action = async ({ request }: ActionFunctionArgs) => {
  const formData = await request.formData();

  const result = Schema.safeParse({
    email: formData.get("email"),
    password: formData.get("password")
  });

  if (!result.success) {
    return json({ errors: result.error.flatten() }, { status: 400 });
  }

  // result.dataëŠ” íƒ€ì… ì•ˆì „
  const { email, password } = result.data;
};
```

---

## ğŸ› ï¸ ìœ ìš©í•œ ìœ í‹¸ë¦¬í‹°

### í˜„ì¬ ê²½ë¡œ í™•ì¸
```typescript
import { useLocation } from "@remix-run/react";

const location = useLocation();
console.log(location.pathname); // "/posts/123"
```

### ë§¤ì¹­ëœ ë¼ìš°íŠ¸ í™•ì¸
```typescript
import { useMatches } from "@remix-run/react";

const matches = useMatches();
// í˜„ì¬ ë¼ìš°íŠ¸ ê³„ì¸µ êµ¬ì¡°
```

### ì¬ê²€ì¦
```typescript
import { useRevalidator } from "@remix-run/react";

const revalidator = useRevalidator();

const handleRefresh = () => {
  revalidator.revalidate();
};
```

---

## ğŸ“± ìì£¼ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´

### ë‚™ê´€ì  UI
```typescript
const fetcher = useFetcher();

const isCompleted = fetcher.formData
  ? fetcher.formData.get("completed") === "true"
  : todo.completed;
```

### ë¬´í•œ ìŠ¤í¬ë¡¤
```typescript
const fetcher = useFetcher<typeof loader>();

useEffect(() => {
  const observer = new IntersectionObserver((entries) => {
    if (entries[0].isIntersecting && hasMore) {
      fetcher.load(`?page=${page + 1}`);
    }
  });

  // ...
}, [hasMore, page]);
```

### ìë™ ì €ì¥
```typescript
const fetcher = useFetcher();
const [content, setContent] = useState("");
const debouncedContent = useDebounce(content, 1000);

useEffect(() => {
  const formData = new FormData();
  formData.append("content", debouncedContent);
  fetcher.submit(formData, { method: "post" });
}, [debouncedContent]);
```

---

## ğŸ¯ ë¹ ë¥¸ ì°¸ì¡° ìš”ì•½

| ì‘ì—… | ì‚¬ìš©í•  ê²ƒ |
|------|----------|
| ë°ì´í„° ê°€ì ¸ì˜¤ê¸° | `loader` |
| ë°ì´í„° ë³€ê²½ | `action` |
| í˜ì´ì§€ ì´ë™ | `<Link>` |
| ë¹„ë™ê¸° ì‘ì—… | `useFetcher` |
| ë¡œë”© ìƒíƒœ | `useNavigation` |
| ì—ëŸ¬ ì²˜ë¦¬ | `ErrorBoundary` |
| SEO | `meta` |
| ìŠ¤íƒ€ì¼ | `links` |
| ì„¸ì…˜ | `createCookieSessionStorage` |
| í™˜ê²½ ë³€ìˆ˜ | `process.env.*` |

---

**ì´ ì¹˜íŠ¸ ì‹œíŠ¸ë¥¼ ë¶ë§ˆí¬í•˜ê³  ìì£¼ ì°¸ì¡°í•˜ì„¸ìš”! ğŸ“Œ**
